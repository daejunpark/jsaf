(function(NTES){function playByAsc(curSeq,total){return(curSeq+1)%total}function playByDesc(curSeq,total){return curSeq<=0?total-1:(curSeq-1)%total}NTES.ui={};NTES.ui.Slide=function(ctrls,contents,css,eventName,interval,delay,onShow){if(!arguments.length){return}var t=this;t.total=contents.length;if(ctrls&&t.total!==ctrls.length){throw"can not match ctrls("+ctrls.length+") and contents("+t.total+")"}t.constructor=arguments.callee;t._curIndex=-1;t._ctrls=ctrls;t._contents=contents;t._css=css;t._eventName=eventName;t.interval=interval;t.playMode=playByAsc;t.rollbackMode=playByDesc;t.delay=delay;t.onShow=onShow||function(){};if(t._ctrls&&t._ctrls.length&&t._eventName){var change,preventChange;if(delay){change=function(e,index){!this._delayTimer&&(this._delayTimer=setTimeout(this.show.bind(this,index),this.delay));e.preventDefault()}.bind(t);preventChange=function(){if(this._delayTimer){clearTimeout(this._delayTimer);delete this._delayTimer}}.bind(t)}else{change=function(e,index){this.show(index);e.preventDefault()}.bind(t)}for(var i=t.total-1;i>=0;i--){NTES.event.addEvent(t._ctrls[i],eventName,change,new Number(i));preventChange&&NTES.event.addEvent(t._ctrls[i],"mouseout",preventChange)}}t.interval&&t.play()};NTES.ui.Slide.prototype={show:function(index){var t=this;index=index<0?0:index>=t.total?t.total-1:index;var ctrl=t._ctrls?t._ctrls[index]:null,content=t._contents[index];if(-1===t._curIndex){t._curIndex=0}NTES.style.removeCss(t._ctrls,t._css);NTES.style.removeCss(t._contents,t._css);NTES.style.addCss(ctrl,t._css);NTES.style.addCss(content,t._css);t.onShow&&t.onShow(index,ctrl,content);t._curIndex=index},showNext:function(){this.show(this.playMode(this._curIndex,this.total))},showPrevious:function(){this.show(this.rollbackMode(this._curIndex,this.total))},play:function(interval){var t=this;if(!isNaN(interval)){t.interval=parseInt(interval)}if(!t._playTimer){if(!t._hasEvent){var pause=t.pause.bind(t),play=t.play.bind(t);NTES.event.addEvent(t._ctrls,"mouseover",pause);NTES.event.addEvent(t._ctrls,"mouseout",play);NTES.event.addEvent(t._contents,"mouseover",pause);NTES.event.addEvent(t._contents,"mouseout",play);t._hasEvent=1}t._playTimer=setInterval(t.showNext.bind(t),t.interval)}},pause:function(){var t=this;if(t._playTimer){clearInterval(t._playTimer);delete t._playTimer;if(t.onStop){var curIndex=t._curIndex;t.onStop(curIndex,t._ctrls[curIndex],t._contents[curIndex])}}}}})(NTES);(function(_,B){var A=_.NTES||{};if(!A.ui)A.ui={};A.ui.version="0.1.9 Build 201005070941";A.ui.Template=function(){this._cache={}};A.ui.Template.prototype={get:function($){return null==this._cache[$]?"":this._cache[$]},parse:function(_,$){return A.util.parseTpl(this.get(_),$)},load:function($){var _;if(A.util.isArray($)){_=$.length;while(--_>=0)this._cache[$[_].title]=$[_].innerHTML.replace(/(?:^\s*<!--)|(?:-->\s*$)/g,"")}else for(_ in $)$.hasOwnProperty(_)&&(this._cache[_]=$[_])}};A.ui.Template._cache={};A.ui.Template.get=A.ui.Template.prototype.get;A.ui.Template.parse=A.ui.Template.prototype.parse;A.ui.Template.load=function($){$=$||A("#templates > *");A.ui.Template.prototype.load.call(this,$)};A.ui.PopupLayer=function(E,$,C,D){if(!arguments.length)return;var _=this;_.constructor=arguments.callee;_._ctrl=E;_._content=$;_.delay=isNaN(D)?300:D;var B=_.delayHide.bind(_),F=_.clearDelay.bind(_);A.event.addEvent(E,C,_.show.bind(_));A.event.addEvent(E,"mouseout",B);A.event.addEvent(E,"mouseover",F);A.event.addEvent($,"mouseover",F);A.event.addEvent($,"mouseout",B)};A.ui.PopupLayer.prototype={show:function(){A.style.addCss(this._content,"display:block;");this.onShow&&this.onShow()},hide:function(){A.style.addCss(this._content,"display:none;");this.onHide&&this.onHide()},delayHide:function(){if(this._timerId===B)this._timerId=setTimeout(this.hide.bind(this),this.delay)},clearDelay:function(){if(this._timerId!==B){clearTimeout(this._timerId);this._timerId=B}}};var C={left:function(A){var $=this,_=$._wrapper.scrollLeft+A;$._wrapper.scrollLeft=$._copy.offsetWidth-_<=0?_-$._body.offsetWidth:_},right:function(A){var $=this,B,_=$._wrapper.scrollLeft;if(_<=0)_+=$._body.offsetWidth;B=_-A;$._wrapper.scrollLeft=B<0?$._body.offsetWidth+B:B},top:function(A){var $=this,_=$._wrapper.scrollTop+A;$._wrapper.scrollTop=$._copy.offsetHeight-_<=0?_-$._body.offsetHeight:_},bottom:function(A){var $=this,B,_=$._wrapper.scrollTop;if(_<=0)_+=$._body.offsetHeight;B=_-A;$._wrapper.scrollTop=B<0?$._body.offsetHeight+B:B}};A.ui.Marquee=function($,A,B,C){if(!arguments.length)return;var _=this;_.constructor=arguments.callee;_._body=$;_._wrapper=$.parentNode;_._copy=document.createElement($.tagName);_._copy.className=$.className;_._copy.innerHTML=$.innerHTML;_._wrapper.appendChild(_._copy);_._wrapper=_._wrapper.parentNode;A=A?A.toLowerCase():"left";_.setDirection(A);_.fps=isNaN(B)?15:B;_.lpf=isNaN(C)?1:C;_._timerIds=[]};A.ui.Marquee.prototype={setDirection:function($){this.move=C[$];if(!this.move)throw"not such direction"},_scroll:function(A){var $=this,_=$.lpf;if(!$._isPause)if(A.length!==0){if(A.length>0){_=Math.min(A.length,_);A.length-=_}$.move(_)}else{$.stop();A.callback&&A.callback()}},start:function(){var $=this;if(0===$._timerIds.length){var E,C,D,_=arguments;switch(typeof _[0]){case"number":E=_[0];if("string"===typeof _[1]){C=_[1];D=_[2]}else D=_[1];break;case"string":C=_[0];E=_[1];D=_[2];break}C&&$.setDirection(C);var F={length:isNaN(E)?-1:parseInt(E)};if(F.length>0)F.callback=A.util.isFunction(D)?D:B;$._currentScroll=$._scroll.bind($,F);$._timerIds.push(setInterval($._currentScroll,$.fps))}},stop:function(){var $=this;while($._timerIds.length)clearInterval($._timerIds.pop());$._currentScroll=B},speedUp:function(){var $=this;$._timerIds.length&&$._timerIds.push(setInterval($._currentScroll,$.fps))},slowDown:function(){this._timerIds.length>1&&clearInterval(this._timerIds.pop())},go:function(){this._isPause=false},stay:function(){this._isPause=true}};var $=[31,28,31,30,31,30,31,31,30,31,30,31];A.ui.Calendar=function(_,$){this.constructor=arguments.callee;this.setDate(_,$)};A.ui.Calendar.prototype={getYear:function(){return this._year},getMonth:function(){return this._month+1},setDate:function(A,_){var $=new Date;this._year=isNaN(A)?$.getFullYear():A;this._month=isNaN(_)?$.getMonth():_-1},build:function(){var E=NTES.ui.Calendar.getDayCount(this._year,this._month+1),A=new Date(this._year,this._month,1),_=new Date,$=A.getDay(),C={year:this._year,month:this._month+1,weeks:[]},G,B,D,F=[];_.setHours(0,0,0,0);_=_.getTime();while($-->0)F.push({value:""});for(G=1;G<=E;G++){A.setDate(G);D=A.getTime();if(D>_)B=1;else if(D<_)B=-1;else B=0;F.push({value:G,state:B});if(F.length===7){C.weeks.push(F);F=[]}}if(F.length%7!==0){while(F.length<7)F.push({value:""});C.weeks.push(F)}return C}};A.ui.Calendar.getDayCount=function(A,_){return 2==_?0==A%4&&0!=A%100||0==A%400?29:28:$[_-1]}})(window);