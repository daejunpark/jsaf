var Tumblr=Tumblr||{};Tumblr.SpellChecker={dictionary:[],maxTransforms:1,costMultiplier:1,damerauLevenshteinDist:function(l,k,g){if(typeof(l)!=="string"||typeof(k)!=="string"){return false}if(typeof(g)!="number"){g=99}var f=0,d=0,c=0,n=l.length,m=k.length;if(n===0||m===0){return(Math.abs(n-m)<=g)?Math.max(n,m):false}if(n<m){var e;e=n;n=m;m=e;e=l;l=k;k=e}var h=[];for(f=0;f<=n;f++){h[f]=[];h[f][0]=f}for(d=0;d<=m;d++){h[0][d]=d}for(f=1;f<=n;f++){for(d=1;d<=m;d++){if(l[f-1]==k[d-1]){c=0}else{c=1}h[f][d]=Math.min(h[f-1][d]+1,h[f][d-1]+1,h[f-1][d-1]+c);if(f==1||d==1){continue}if(l[f-1]==k[d-2]&&l[f-2]==k[d-1]){h[f][d]=Math.min(h[f][d],h[f-2][d-2]+c)}}}return(h[n][m]<=g)?h[n][m]:false},returnFunc:function(a){return a.name},suggest:function(b){var a=[],f=0,e=this.damerauLevenshteinDist,d=this.maxTransforms,c=this.returnFunc;this.dictionary.each(function(g){if((f=e(b,g.name,d))!==false){a.push({name:g.name,dist:f,cost:g.cost})}});if(a.length){return a.sortBy(this.sortByFunc,this).map(this.returnFunc)}else{return[]}},sortByFunc:function(c){var b=this.costMultiplier;return(c.dist+c.cost*b)},initialized:false,init:function(d,a){if(!(d instanceof Array)){return false}var c=[];var b;d.each(function(f){var e=typeof(f);if(e==="object"){c.push(f)}else{if(e==="string"){c.push({name:f,cost:0})}}});this.dictionary=c;if(typeof(a)=="object"){for(b in a){if(a.hasOwnProperty(b)&&this.hasOwnProperty(b)){this[b]=a[b]}}}this.initialized=true;return this}};
(function(i,k,a){var e=["webkit","Moz","ms","O"];var p={};var o;function g(q,t){var r=k.createElement(q||"div");var s;for(s in t){r[s]=t[s]}return r}function h(r){for(var q=1,s=arguments.length;q<s;q++){r.appendChild(arguments[q])}return r}var j=function(){var q=g("style");h(k.getElementsByTagName("head")[0],q);return q.sheet||q.styleSheet}();function c(u,q,v,y){var r=["opacity",q,~~(u*100),v,y].join("-");var s=0.01+v/y*100;var x=Math.max(1-(1-u)/q*(100-s),u);var w=o.substring(0,o.indexOf("Animation")).toLowerCase();var t=w&&"-"+w+"-"||"";if(!p[r]){j.insertRule("@"+t+"keyframes "+r+"{0%{opacity:"+x+"}"+s+"%{opacity:"+u+"}"+(s+0.01)+"%{opacity:1}"+(s+q)%100+"%{opacity:"+u+"}100%{opacity:"+x+"}}",0);p[r]=1}return r}function n(u,v){var t=u.style;var q;var r;if(t[v]!==a){return v}v=v.charAt(0).toUpperCase()+v.slice(1);for(r=0;r<e.length;r++){q=e[r]+v;if(t[q]!==a){return q}}}function f(q,s){for(var r in s){q.style[n(q,r)||r]=s[r]}return q}function m(s){for(var q=1;q<arguments.length;q++){var r=arguments[q];for(var t in r){if(s[t]===a){s[t]=r[t]}}}return s}function l(q){var r={x:q.offsetLeft,y:q.offsetTop};while((q=q.offsetParent)){r.x+=q.offsetLeft;r.y+=q.offsetTop}return r}var d={lines:12,length:7,width:5,radius:10,color:"#000",speed:1,trail:100,opacity:1/4,fps:20,zIndex:2000000000,className:"spinner",top:"auto",left:"auto"};var b=function b(q){if(!this.spin){return new b(q)}this.opts=m(q||{},b.defaults,d)};b.defaults={};b.prototype={spin:function(x){this.stop();var B=this;var q=B.opts;var r=B.el=f(g(0,{className:q.className}),{position:"relative",zIndex:q.zIndex});var A=q.radius+q.length+q.width;var C;var z;if(x){x.insertBefore(r,x.firstChild||null);z=l(x);C=l(r);f(r,{left:(q.left=="auto"?z.x-C.x+(x.offsetWidth>>1):q.left+A)+"px",top:(q.top=="auto"?z.y-C.y+(x.offsetHeight>>1):q.top+A)+"px"})}r.setAttribute("aria-role","progressbar");B.lines(r,B.opts);if(!o){var u=0;var s=q.fps;var w=s/q.speed;var v=(1-q.opacity)/(w*q.trail/100);var y=w/q.lines;!function t(){u++;for(var D=q.lines;D;D--){var E=Math.max(1-(u+D*y)%w*v,q.opacity);B.opacity(r,q.lines-D,E,q)}B.timeout=B.el&&setTimeout(t,~~(1000/s))}()}return B},stop:function(){var q=this.el;if(q){clearTimeout(this.timeout);if(q.parentNode){q.parentNode.removeChild(q)}this.el=a}return this},lines:function(s,u){var r=0;var q;function t(v,w){return f(g(),{position:"absolute",width:(u.length+u.width)+"px",height:u.width+"px",background:v,boxShadow:w,transformOrigin:"left",transform:"rotate("+~~(360/u.lines*r)+"deg) translate("+u.radius+"px,0)",borderRadius:(u.width>>1)+"px"})}for(;r<u.lines;r++){q=f(g(),{position:"absolute",top:1+~(u.width/2)+"px",transform:u.hwaccel?"translate3d(0,0,0)":"",opacity:u.opacity,animation:o&&c(u.opacity,u.trail,r,u.lines)+" "+1/u.speed+"s linear infinite"});if(u.shadow){h(q,f(t("#000","0 0 4px #000"),{top:2+"px"}))}h(s,h(q,t(u.color,"0 0 1px rgba(0,0,0,.1)")))}return s},opacity:function(r,q,s){if(q<r.childNodes.length){r.childNodes[q].style.opacity=s}}};!function(){var r=f(g("group"),{behavior:"url(#default#VML)"});var q;if(!n(r,"transform")&&r.adj){for(q=4;q--;){j.addRule(["group","roundrect","fill","stroke"][q],"behavior:url(#default#VML)")}b.prototype.lines=function(v,u){var t=u.length+u.width;var B=2*t;function A(){return f(g("group",{coordsize:B+" "+B,coordorigin:-t+" "+-t}),{width:B,height:B})}var w=-(u.width+u.length)*2+"px";var z=f(A(),{position:"absolute",top:w,left:w});var y;function x(C,s,D){h(z,h(f(A(),{rotation:360/u.lines*C+"deg",left:~~s}),h(f(g("roundrect",{arcsize:1}),{width:t,height:u.width,left:u.radius,top:-u.width>>1,filter:D}),g("fill",{color:u.color,opacity:u.opacity}),g("stroke",{opacity:0}))))}if(u.shadow){for(y=1;y<=u.lines;y++){x(y,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)")}}for(y=1;y<=u.lines;y++){x(y)}return h(v,z)};b.prototype.opacity=function(t,s,v,u){var w=t.firstChild;u=u.shadow&&u.lines||0;if(w&&s+u<w.childNodes.length){w=w.childNodes[s+u];w=w&&w.firstChild;w=w&&w.firstChild;if(w){w.opacity=v}}}}else{o=n(r,"animation")}}();i.Spinner=b})(window,document);
(function(c,b){var a=Backbone.View.extend({el:"body",initialize:function(){this.frame_width=100;this.frame_count=98;this.frame_rate=12;this.freeze_frames=[1,7,20,29,38,47,70,88];this.current_frame=this.freeze_frames[Math.floor(Math.random()*this.freeze_frames.length)]-1;this.is_animating=false;this.animation=false;this.animation_time=false;this.determine_animation_method();this.$loader=this.create_loader()},create_loader:function(){return c('<div id="illustrated_loader" class="illustrated_loader" />')},attach_loader:function(){if(!c("#illustrated_loader").length){this.$el.append(this.$loader)}},determine_animation_method:function(){(function(){var e=0;var f=["ms","moz","webkit","o"];for(var d=0;d<f.length&&!window.requestAnimationFrame;++d){window.requestAnimationFrame=window[f[d]+"RequestAnimationFrame"];window.cancelAnimationFrame=window[f[d]+"CancelAnimationFrame"]||window[f[d]+"CancelRequestAnimationFrame"]}if(!window.requestAnimationFrame){window.requestAnimationFrame=function(k,h){var g=new Date().getTime();var i=Math.max(0,16-(g-e));var j=window.setTimeout(function(){k(g+i)},i);e=g+i;return j}}if(!window.cancelAnimationFrame){window.cancelAnimationFrame=function(g){clearTimeout(g)}}}());this.animation_method=(requestAnimationFrame)?"requestAnimationFrame":"interval"},start_animation:function(){this.attach_loader();this.current_frame=(this.current_frame)?this.current_frame:0;this.set_frame();if(this.animation_method=="interval"){if(this.is_animating){return}this.animation=setInterval(function(){this.next_frame()}.bind(this),1000/this.frame_rate)}else{var d=new Date().getTime(),e=d-(this.animation_time||d);this.animation_time=d;setTimeout(function(){this.animation=requestAnimationFrame(this.start_animation.bind(this));this.next_frame()}.bind(this),1000/this.frame_rate)}this.is_animating=true},stop_animation:function(){if(this.animation_method=="interval"){clearInterval(this.animation)}else{cancelAnimationFrame(this.animation)}this.is_animating=false},next_frame:function(){this.current_frame++;if(_.contains(this.freeze_frames,this.current_frame)){this.stop_animation();setTimeout(this.start_animation.bind(this),500);return}if(this.frame_wait>=this.frame_rate){this.frame_wait=0}if(this.current_frame>=this.frame_count){this.current_frame=0}this.set_frame()},set_frame:function(){this.$loader.css({"background-position":"-"+(this.current_frame*this.frame_width)+"px 0px"})}});b.IllustratedLoader=a})(jQuery,Tumblr);
