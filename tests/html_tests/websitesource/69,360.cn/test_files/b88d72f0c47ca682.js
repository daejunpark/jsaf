(function(){function e(e){n(this,e),this.render()}var t=function(e){var t=document.getElementsByTagName("head")[0]||document.documentElement,n=document.createElement("script"),r=!1;n.src=e,n.charset="utf-8",n.onerror=n.onload=n.onreadystatechange=function(){!r&&(!this.readyState||this.readyState=="loaded"||this.readyState=="complete")&&(r=!0,t.removeChild(n))},t.insertBefore(n,t.firstChild)},n=function(e,t){for(var n in t)e[n]=t[n];return e},r=function(e,t){return n(document.createElement(e),t)},i=function(e){return e=e||window.event,e.target||e.srcElement},s=function(e){return e=e||window.event,e.which||e.keyCode||e.charCode},o=function(e){e=e||window.event,e.preventDefault&&e.preventDefault()||(e.returnValue=!1)},u=function(e,t){return(new RegExp("(?:^|\\s)"+t+"(?:\\s|$)","i")).test(e.className)},a=function(e,t){u(e,t)||(e.className=(e.className+" "+t).replace(/^\s+|\s+$/g,""))},f=function(e,t){u(e,t)&&(e.className=e.className.replace(new RegExp("(?:\\s|^)"+t+"(?:\\s|$)","i")," ").replace(/^\s+|\s+$/g,""))},l=function(e,t,n){do if(e.tagName==t)return e;while(e!=n&&(e=e.parentNode));return null},c=function(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent("on"+t,n)},h=/msie/i.test(navigator.userAgent);e.prototype={width:0,oText:null,itemsData:null,oMenu:null,oWrap:null,selectedIndex:-1,filteredValue:"",filteringValue:"",acValue:"",closed:!1,show:function(){this.oText.value&&this.oMenu.childNodes.length&&(this.oWrap.style.display="")},hide:function(){typeof this.beforeHide=="function"&&this.beforeHide(),this.oWrap.style.display="none"},refreshItems:function(){var e=this,t=e.itemsData;if(t&&!t.__isItemsDataRendered){var n=[];for(var r=0;r<t.length;r++)n.push('<li ac_index="'+r+'" acValue="'+t[r][0].replace(/&/g,"&amp;").replace(/"/g,"&quot;")+'">'+t[r][1]+"</li>");e.oMenu.innerHTML=n.join("").replace(/(<\w+)/g,'$1 unselectable="on"'),t.length?e.show():e.hide(),e.filteredValue=e.filteringValue,e.acValue="",e.selectedIndex=-1,t.__isItemsDataRendered=!0;var i=document.getElementById("provided-by");i.style.position="static",i.style.position="absolute"}},setSelectedIndex:function(e,t){var n=this,r=n.oMenu.childNodes;r.length?(n.selectedIndex>-1&&f(r[n.selectedIndex],"selected"),e=(e+r.length+1)%(r.length+1),e==r.length?(n.acValue=n.oText.value=n.filteringValue,e=-1):(n.acValue=n.oText.value=r[e].getAttribute("acValue"),a(r[e],"selected"))):e=-1,n.selectedIndex=e},render:function(){function e(e){t.closed||t.show(),clearInterval(t._refreshTimer),t._refreshTimer=setInterval(function(){if(g)return!1;var e=p.value,n=e.indexOf("?");n!=-1&&(e=e.substr(0,n)),e?t.closed||(e!=t.filteredValue&&e!=t.filteringValue&&e!=t.acValue&&(t.filteringValue=e,t.refreshData()),t.itemsData&&t.refreshItems()):(t.acValue=t.filteringValue=t.filteredValue="",t.hide(),t.closed=!1)},100)}var t=this;if(t._rendered)return;t._rendered=!0;var n='<div class=ac_wrap_inner><div class=ac_menu_ctn><ul class=ac_menu></ul></div><div id="provided-by" class=ac_toolbar>\u7531360\u641c\u7d22\u63d0\u4f9b</div></div>';/msie[ \/os]*6\./ig.test(navigator.userAgent)&&(n='<iframe class="ac_bgIframe" frameBorder="0"></iframe>'+n);var u=r("div",{className:"ac_wrap",innerHTML:n.replace(/(<\w+)/g,'$1 unselectable="on"')}),p=t.oText,d=t.oPos||p;d.parentNode.insertBefore(u,d);var v=t.oMenu=u.getElementsByTagName("ul")[0];p.setAttribute("autoComplete","off");var m=t.oText.getAttribute("suggestWidth")||d.offsetWidth+"px";h?u.style.width=m:u.style.minWidth=m,u.style.top=d.offsetHeight+"px",u.style.left=d.offsetLeft+"px",t.oWrap=u,t.hide(),c(t.oText,"dblclick",function(e){t.show()}),c(t.oText,"keydown",function(e){var n=s(e),r=0;switch(n){case 40:r=1;break;case 38:r=-1;break;case 27:t.closed||(t.hide(),t.closed=!0,o(e))}r&&p.value&&(o(e),u.style.display=="none"?(t.show(),t.closed=!1):t.setSelectedIndex(t.selectedIndex+r))}),c(t.oText,"focus",e),c(t.oText,"blur",function(e){t.hide(),clearInterval(t._refreshTimer)});var g,y;u.onmousedown=function(e){o(e),clearTimeout(y),g=!0,y=setTimeout(function(){g=!1},2e3)},v.onclick=function(e){var n=i(e),r=l(n,"LI",v);if(r){p.blur(),setTimeout(function(){p.focus()},10);var s=0,o=r,u=p.value;while(o=o.previousSibling)s++;t.setSelectedIndex(s,!0),t.closed=!0,t.hide(),clearInterval(t._refreshTimer),t.onselectitem&&t.onselectitem({index:parseInt(r.getAttribute("ac_index"),10),word:r.getAttribute("acvalue"),inputValue:u})}},v.onmouseover=function(e){var n=i(e),r=l(n,"LI",v);r&&(t.enableHoverState?a(r,"hover"):(t.selectedIndex>-1&&f(t.oMenu.childNodes[t.selectedIndex],"selected"),a(r,"selected"),t.selectedIndex=parseInt(r.getAttribute("ac_index"))))},v.onmouseout=function(e){var n=i(e),r=l(n,"LI",v);r&&(t.enableHoverState?f(r,"hover"):f(r,"selected"))},u.onmouseout=function(e){t.enableHoverState||t.selectedIndex>-1&&f(t.oMenu.childNodes[t.selectedIndex],"selected")},document.activeElement===t.oText&&e()}};var p=null,d={},v=null,m,g=function(e,t){v.dataAdapter&&!t&&(e=v.dataAdapter(e));var n=[],r=e.s||[],i=p.value;for(var s=0,o=r.length;s<o;s++){var u=r[s],a=u;i&&a.toLowerCase().indexOf(i.toLowerCase())===0&&(a=a.substr(0,i.length)+"<b>"+a.substr(i.length)+"</b>"),u&&n.push([u,a])}v.itemsData=n,e.q&&(d[e.q]=e)},y=function(r){r=n(r,{alignElement:r.alignElement||r.inputElement,urlPrefix:r.urlPrefix||"http://sug.so.360.cn/suggest/word?callback=suggest_so&encodein=utf-8&encodeout=utf-8&word=",enableHoverState:r.hasOwnProperty("enableHoverState")?r.enableHoverState:!1});var i=r.urlPrefix.match(/callback=(\w+)/)[1];window[i]=g,p=r.inputElement,v=window.cb=new e({oText:p,oPos:r.alignElement,enableHoverState:r.enableHoverState,dataAdapter:r.dataAdapter,beforeHide:r.beforeHide||function(){},onselectitem:function(e){if(r.beforeSelectItem&&!1===r.beforeSelectItem(e))return;var t=p.form.elements;for(var n=0;n<t.length;n++)if(t[n].type=="submit"){t[n].click();return}},refreshData:function(){var e=d[p.value];e?g(e,!0):t(r.urlPrefix+encodeURIComponent(p.value))}})};window.createSuggest=y})();