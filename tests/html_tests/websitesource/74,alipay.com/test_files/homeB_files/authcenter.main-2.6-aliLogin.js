(function(a){a&&(a=a.deps,a.addDependency("aralex.validator.ClassicValidator","aralex.validator.ClassicValidator-1.6.js,aralex.validator.Validator-1.6.js,alipay.http-1.1.js,arale.http-1.1.js,arale.uri-1.0.js,aralex.base-1.1.js,arale.aspect-1.0.js,arale.tmpl-1.0.js,arale.class-1.0.js,arale.event-1.1.js,arale.dom-1.1.js,arale.string-1.0.js,arale.hash-1.0.js,arale.array-1.1.js,arale.base-1.1.js".split(",")),a.addDependency("authcenter.main","authcenter.main-2.6.js,aralex.validator.ClassicValidator-1.6.js,alipay.localstorage-1.0.js,aralex.validator.Validator-1.6.js,alipay.http-1.1.js,arale.http-1.1.js,arale.uri-1.0.js,alipay.placeholder-1.0.js,aralex.base-1.1.js,arale.aspect-1.0.js,arale.tmpl-1.0.js,arale.class-1.0.js,arale.event-1.1.js,arale.dom-1.1.js,arale.string-1.0.js,arale.hash-1.0.js,arale.array-1.1.js,arale.base-1.1.js".split(",")),
a.addDependency("alipay.localstorage",["alipay.localstorage-1.0.js","arale.base-1.1.js"]),a.addDependency("arale.string",["arale.string-1.0.js","arale.base-1.1.js"]),a.addDependency("arale.base",["arale.base-1.1.js"]),a.addDependency("arale.uri",["arale.uri-1.0.js","arale.base-1.1.js"]),a.addDependency("aralex.validator.Validator","aralex.validator.Validator-1.6.js,alipay.http-1.1.js,arale.http-1.1.js,arale.uri-1.0.js,aralex.base-1.1.js,arale.aspect-1.0.js,arale.tmpl-1.0.js,arale.class-1.0.js,arale.event-1.1.js,arale.dom-1.1.js,arale.string-1.0.js,arale.hash-1.0.js,arale.array-1.1.js,arale.base-1.1.js".split(",")),
a.addDependency("arale.hash",["arale.hash-1.0.js","arale.base-1.1.js"]),a.addDependency("arale.event","arale.event-1.1.js,arale.dom-1.1.js,arale.string-1.0.js,arale.hash-1.0.js,arale.array-1.1.js,arale.base-1.1.js".split(",")),a.addDependency("arale.http",["arale.http-1.1.js","arale.uri-1.0.js","arale.hash-1.0.js","arale.array-1.1.js","arale.base-1.1.js"]),a.addDependency("alipay.http","alipay.http-1.1.js,arale.http-1.1.js,arale.uri-1.0.js,arale.hash-1.0.js,arale.array-1.1.js,arale.base-1.1.js".split(",")),
a.addDependency("arale.array",["arale.array-1.1.js","arale.base-1.1.js"]),a.addDependency("arale.aspect",["arale.aspect-1.0.js","arale.base-1.1.js"]),a.addDependency("arale.dom",["arale.dom-1.1.js","arale.string-1.0.js","arale.hash-1.0.js","arale.array-1.1.js","arale.base-1.1.js"]),a.addDependency("arale.tmpl",["arale.tmpl-1.0.js","arale.base-1.1.js"]),a.addDependency("aralex.base","aralex.base-1.1.js,arale.aspect-1.0.js,arale.tmpl-1.0.js,arale.class-1.0.js,arale.event-1.1.js,arale.dom-1.1.js,arale.string-1.0.js,arale.hash-1.0.js,arale.array-1.1.js,arale.base-1.1.js".split(",")),
a.addDependency("arale.class",["arale.class-1.0.js","arale.base-1.1.js"]),a.addDependency("alipay.placeholder","alipay.placeholder-1.0.js,aralex.base-1.1.js,arale.aspect-1.0.js,arale.tmpl-1.0.js,arale.class-1.0.js,arale.event-1.1.js,arale.dom-1.1.js,arale.string-1.0.js,arale.hash-1.0.js,arale.array-1.1.js,arale.base-1.1.js".split(",")))})("undefined"==typeof arale?void 0:arale);
system.auth.param={account:$("logonId"),J_alieditPwd:$$(".alieditContainer")[0],standarPwd:$("password_input"),J_standarPwd:$$(".standardPwdContainer")[0],authcode:$("authcode"),J_authcode:$("J_authcode"),safeSignCheck:$("safeSignCheck"),J_safeSignCheck:$("J_safeSignCheck"),loginBtn:$("btn-submit"),alieditUsing:document.getElementsByName("J_aliedit_using")[0],password:$("password"),loginForm:$("login")};system.auth.instance={};
arale.isIE6()&&($E.connect(system.auth.param.loginBtn,"mouseover",function(a){$(a.currentTarget).addClass("ui-button-ok-hover")}),$E.connect(system.auth.param.loginBtn,"mouseout",function(a){$(a.currentTarget).removeClass("ui-button-ok-hover")}),$A($$(".ui-input")).each(function(a){$E.connect(a,"mouseover",function(b){$(b.currentTarget).addClass("ui-input-hover")});$E.connect(a,"mouseout",function(b){$(b.currentTarget).removeClass("ui-input-hover")})}));
"undefined"!==typeof ERRORCODE&&ERRORCODE&&Tracker.click("auth-"+ERRORCODE);system.auth.util=system.auth.util||{};system.auth.util.trimAll=function(a){return a.toString().replace(/^\s+|\s+|\s+$/g,"")};system.auth.util.limitEmail=function(a){var a=a.replace(/^\s*(.*?)\s*$/g,"$1"),b=/(^.*)(.{3}$)/g,c=a.split("@"),d=c[0],e=c[1];if(c.length>1){d.length>6&&(d=d.slice(0,6).replace(b,"$1***"));return[d,"@",e].join("").toLowerCase()}return a.toLowerCase()};
(function(){var a={formCont_:$("login"),loginDom:$("userSSOLogined"),loginNameDom:$("userLoginedName"),loginIconDom:$("userLoginedIcon"),loginBtn:$("aliLogin_login"),changeBtn:$("aliLogin_change"),loadingTips:$("aliLogin_loading"),havanaSsoUrl:null,authTokenServer:"havana_trust_login.htm",timeout:1E3,tokenValue:"",isTokenRequested:false,isHomePage:false,isHomePageShowed:false,siteValue:1,autoLogin:false,site:null,gotoUrl:"",companyList:{company_0:"taobao",company_3:"cbu",company_4:"icbu",company_6:"aliyun",
company_7:"aliyunOs",company_8:"aliyun",company_9:"aliyun"},init:function(){this.blindEvent();this.loginNameRequest()},blindEvent:function(){var b=this;this.changeBtn.click(function(a){b.showFormDom();a.preventDefault()});this.loginBtn.click(function(a){if(!b.isTokenRequested){b.loginTokenRequest();b.isTokenRequested=true;b.loginBtn.parent().addClass("ui-button-ok-disabled");b.loginBtn.parent().removeClass("ui-button-ok");b.changeBtn.addClass("fn-hide");b.loadingTips.removeClass("fn-hide")}a.preventDefault()})},
getInputValue:function(b){return document.getElementsByName(b)[0]?document.getElementsByName(b)[0].value:""},loginNameRequest:function(){var b=this;Loader.use(["arale.http"],function(){var a=$Ajax.jsonp(b.havanaSsoUrl+"/api/havana_top.js",{data:{site:b.siteValue,single:true},timeout:b.timeout,callparam:"callback",charset:"UTF-8",success:function(a){b.loginNameSuccessCallback(a)},failure:function(){b.loginNameFailureCallback();system.auth.log("track","aliLogin_request_name_failure");a.cancel();arale.cache.callbacks[a._callback_id]=
function(){}}})})},loginNameSuccessCallback:function(b){if(b.code==200&&b.data&&b.data[0]&&typeof b.data[0].site=="number"&&b.data[0].site!=1&&system.auth.util.trimAll(b.data[0].loginId)!=""){this.showLoginMsgDom(b.data[0].site,b.data[0].loginId);this.isHomePage&&this.showHomePage()}else this.loginNameFailureCallback()},loginNameFailureCallback:function(){this.showFormDom();this.isHomePage&&this.showHomePage()},showLoginMsgDom:function(b,a){this.companyList["company_"+b]&&this.loginIconDom.addClass("aliLogin-icon-"+
this.companyList["company_"+b]);this.loginNameDom.node.innerHTML=system.auth.util.limitEmail(a);this.loginDom.removeClass("fn-hide");this.formCont_.addClass("fn-hide");this.onLoginMsgShow&&this.onLoginMsgShow.call(this,a)},showFormDom:function(){this.formCont_.removeClass("fn-hide");this.loginDom.addClass("fn-hide");this.onFormShow&&this.onFormShow.call(this)},showHomePage:function(){!this.isHomePageShowed&&window.showLogin&&window.showLogin()},loginTokenRequest:function(){if(!this.isTokenRequested){var a=
this,c=a.getInputValue("site");a.isTokenRequested=true;a.tokenValue="";Loader.use(["arale.http"],function(){var d={},d=c!==""?{site:a.siteValue,formSite:c}:{site:a.siteValue},e=$Ajax.jsonp(a.havanaSsoUrl+"/mini_login_check.js",{data:d,timeout:a.timeout,callparam:"callback",charset:"UTF-8",success:function(c){a.loginTokenSuccessCallback(c)},failure:function(){a.loginTokenFailureCallback();system.auth.log("track","aliLogin_request_token_failure");e.cancel();arale.cache.callbacks[e._callback_id]=function(){}}})})}},
loginTokenSuccessCallback:function(a){a.code==200&&a.data&&a.data.st!=null&&a.data.st.length>0?this.tokenValue=a.data.st:system.auth.log("track","aliLogin_request_token_dataError");this.jumpPage()},loginTokenFailureCallback:function(){this.jumpPage()},jumpPage:function(){try{var a=this.authTokenServer+"?token="+this.tokenValue+"&goto="+encodeURIComponent(this.getInputValue("goto"))+"&sso_hid="+this.getInputValue("sso_hid")+"&autoLogin="+this.autoLogin+"&site="+this.getInputValue("site");this.isHomePage?
window.parent.location=a:window.location=a}catch(c){this.showFormDom()}}};system.auth.aliLogin=function(b){for(var c in b)a[c]=b[c];a.autoLogin?a.loginTokenRequest():a.formCont_&&a.loginDom&&a.loginNameDom&&a.havanaSsoUrl?a.init():a.showFormDom()}})();