/*
 suggest.js 2.4.0
 Copyright (c) 2013 Rakuten.Inc
 Date : 2013-04-12 19:01:07
 suggest - swg.js 2.4.0
 Copyright (c) 2013 Rakuten.Inc
 Date : 2013-04-12 19:01:07
 suggest - cnavi.js 2.4.0
 Copyright (c) 2013 Rakuten.Inc
 Date : 2013-04-12 19:01:07
*/
(function(){if("undefined"!==typeof jQuery){var f=jQuery.noConflict(),h;window.searchplat||(searchplat={});searchplat.suggest||(searchplat.suggest={});h=searchplat.suggest;var a=function(){};a.prototype={pluginArray:[],add:function(b){this.pluginArray.push(b)},invokeFunction:function(b,e){for(var a=0,c=this.pluginArray.length;a<c;a++){var d=this.pluginArray[a];"function"===typeof d[e]&&d[e].call(d,b,e)}},init:function(b){for(var e=0,a=this.pluginArray.length;e<a;e++){var c=this.pluginArray[e];if("function"===
typeof c.init&&!c.init(b))return!1}return!0},createSuggestElems:function(b){for(var e="",a,c=0,d=this.pluginArray.length;c<d;c++)a=this.pluginArray[c],"function"===typeof a.createSuggestElems&&(e+=a.createSuggestElems(b));return e},getSelectedText:function(b,e){for(var a=0,c=this.pluginArray.length;a<c;a++){var d=this.pluginArray[a];if("function"===typeof d.getSelectedText&&(d=d.getSelectedText(b,e)))return d}return f(e).text()},addSubmitLog:function(b){for(var e="",a=0,c=this.pluginArray.length;a<
c;a++){var d=this.pluginArray[a];"function"===typeof d.addSubmitLog&&(e+=d.addSubmitLog(b))}return e}};var c=h.plugins=new a,d=function(){h.rsuggest=this};d.prototype={resultCache:{},backup:"",lastInput:"",respInput:null,sggstSelectNum:-1,usingChar:"",mouseInput:null,mouseState:0,mouseMove:0,mouseOver:0,enterFlag:1,keyCode:null,currentFontSize:null,maxIndex:0,index:-1,clickEnableFlag:1,IeVersion:0,viewEvent:null,showTimer:null,waitTimeout:null,suggestDivPos:f("body"),onoff:1,onoffInitFlag:0,onElem:null,
offElem:null,decisionFlag:0,scVal:0,submitWay:0,spaceRegExp:RegExp("^[\\s"+unescape("　")+"]+"),whitespaceMatcher:RegExp("[\\s"+unescape("　")+"]+"),blackList:["iphone","ipod","ipad","android"],onOffBlackList:[],count:10,configCollection:"col",cssRow:"sggstRow",cssSelect:"sggstSelect",cssNoSelect:"sggstNoselect",cssKeyword:"sggstKeyword",cssOnoff:"sggstOnoff",cssOffImage:"sggstHideimg",cssOnImage:"sggstOpenimg",cssRemarks:"sggstComment",cssRemarksBox:"sggstCommentbox",cssComment:"sggstBetabtn01",cssOff:"sggstBetabtn02",
cssOn:"openSuggest",searchCommand:"suggest",submitLogCommand:"submit",cookieCommand:"conf",paramInput:"q",paramCollection:"cl",paramSuggestid:"sid",paramSuggestUse:"su",paramSelectNum:"sn",paramSuggestOnOff:"so",paramFormParam:"fp",paramReqid:"rid",sggstReqid:Math.floor(1E10*Math.random()),paramEncoding:"oe",paramSelect:"ss",paramGroupId:"gi",paramCookieMethod:"mt",paramCookieCheck:"c",paramCookieAdd:"a",paramCookieDelete:"d",paramSubmitWay:"sw",paramCallback:"cb",paramExParam:"ex",ajaxSearchTimeout:1E4,
ajaxSubmitLogTimeout:3E3,afterWaitingforEventTimeout:100,justAddedToQueueTimeout:10,pollingTime:10,retryCount:20,isTimeout:!1,readyState:0,init:function(b){var e=this,b=e.config=f(b),a=h.hook;if(!e.validateConfig(b))return!1;e.form=f("#"+b.attr("form"));e.baseUrl=b.attr("baseUrl");e.button=f("#"+b.attr("button"));e.suggestId=b.attr("suggestId");e.encoding=b.attr("encoding");e.exParam=b.attr("exParam")||"";e.groupId=b.attr("groupId");e.input=f("#"+b.attr("input"));e.input.attr("autocomplete","off");
e.sendFormParam=e.checkBoolNum(b.attr("sendFormParam"))||1;e.onoffEnable=e.checkBoolNum(b.attr("onoff"))||1;e.hookRequired=e.checkBoolNum(b.attr("hookRequired"))||0;e.keywordReplaceOnMouseover=e.checkBoolNum(b.attr("keywordReplaceOnMouseover"))||0;e.addBlackList=b.attr("uaBlackList")||"";e.byteNumToHideOpenSggst=b.attr("byteNumToHideOpenSggst")||36;e.nowFontSize=f("html").css("font-size");e.hideToolTips=b.attr("hideToolTips")||"";e.openToolTips=b.attr("openToolTips")||"";e.pollingTime=b.attr("pollingTime")||
e.pollingTime;e.retryCount=b.attr("retryCount")||e.retryCount;if(!e.preInit()||-1==e.judge()||1!=e.input.parent(".sggstInputWrap").length||1==e.hookRequired&&"undefined"===typeof a){try{e.initFailure()}catch(g){}return!1}"undefined"!==typeof a&&void 0!=a.prototype&&f.extend(d.prototype,a.prototype);if(!c.init(e))return e.initFailure(),!1;e.createSuggestDiv();e.onoffReady();e.resize();f(window).resize(function(){e.resize()});e.input.keydown(function(b){e.enterFlag=0;e.keyCode=b.keyCode;switch(b.keyCode){case 40:e.down();
break;case 38:e.up();break;case 9:e.hide()}}).keypress(function(b){e.keyCode=b.keyCode;e.enterFlag=1;switch(b.keyCode){case 27:return 27==e.keyCode&&e.hide(!0),!1;case 13:return 13==e.keyCode&&(1==e.enterFlag&&1==e.clickEnableFlag)&&(e.clickEnableFlag=0,e.decisionFlag=1,e.submitWay=1,setTimeout(function(){e.button.click()},10),e.eventStop()),!1}}).keyup(function(b){switch(b.keyCode){case 27:return 27==e.keyCode&&e.hide(!0),!1;case 13:return 13==e.keyCode&&(1==e.enterFlag&&1==e.clickEnableFlag)&&(e.clickEnableFlag=
0,e.decisionFlag=1,e.submitWay=1,setTimeout(function(){e.button.click()},10),e.eventStop()),!1}}).focus(function(){e.lastInput=e.input.val();0==e.mouseOver&&(e.backup=e.input.val());e.eventStart()}).blur(function(){0==e.mouseState&&0==e.mouseOver?e.eventStop():(1==e.mouseState||1==e.mouseOver)&&e.input.focus();e.mouseState=0}).mouseover(function(){1==e.keywordReplaceOnMouseover&&(e.suggest.is(":visible")&&-1!=e.index&&0!=e.backup.length&&e.lastInput==e.input.val())&&(e.input.val(e.backup),e.sggstSelectNum=
-1,e.usingChar="")}).attr("maxlength",2048);document.activeElement.id==e.input.attr("id")&&(e.input.blur(),e.input.focus());c.invokeFunction(e,"postInit");e.postInit();return!0},preInit:function(){return!0},postInit:function(){return!0},validateConfig:function(b){if(void 0==b||!this.isMatch(b.attr("input"),/^[a-zA-Z0-9_\-]+$/)||!this.isMatch(b.attr("form"),/^[a-zA-Z0-9_\-]+$/)||!this.isMatch(b.attr("baseUrl"),/^https?:\/\/.+$/)||!this.isMatch(b.attr("button"),/^[a-zA-Z0-9_\-]+$/)||!this.isMatch(b.attr("suggestId"),
/^[a-zA-Z0-9_\-]+$/)||!this.isMatch(b.attr("encoding"),/^(utf-8|euc-jp)$/)||!this.isMatch(b.attr("col"),/^[a-z]+$/)||!this.isMatch(b.attr("groupId"),/^[a-zA-Z0-9_\-]+$/))return!1;var a=b.attr("byteNumToHideOpenSggst");return a&&!this.isInRange(a,1,99)||(a=b.attr("openToolTips"))&&!this.isMatch(a,/^[^<>]+$/)||(a=b.attr("hideToolTips"))&&!this.isMatch(a,/^[^<>]+$/)||(a=b.attr("uaBlackList"))&&!this.isMatch(a,/^[a-zA-Z0-9 _\/\.;]+$/)||(a=b.attr("exParam"))&&!this.isMatch(a,/^[^<>]+$/)||(a=b.attr("pollingTime"))&&
!this.isInRange(a,10,1E3)||(a=b.attr("retryCount"))&&!this.isInRange(a,1,100)||(a=b.attr("onoff"))&&!this.isInRange(a,0,1)||(a=b.attr("hookRequired"))&&!this.isInRange(a,0,1)||(a=b.attr("sendFormParam"))&&!this.isInRange(a,0,1)?!1:(b=b.attr("keywordReplaceOnMouseover"))&&!this.isInRange(b,0,1)?!1:!0},checkBoolNum:function(b){return"undefined"!=typeof b&&0!=b.length&&(0==b||1==b)?b:""},escapeHtml:function(b){return f("<div/>").text(b).html()},initFailure:function(){this.input.attr("autocomplete","")},
createSuggestDiv:function(){var b=this;b.suggest=f("<div>").attr("id","suggest").hide().appendTo(b.suggestDivPos);var a=c.createSuggestElems(this);b.suggest.append(a);b.suggest.delegate("."+b.cssKeyword,"mouseup",function(a){var e=f(this),d=e.text();1!=a.which||(b.mouseInput!=d||0==b.clickEnableFlag)||(b.mouseState=2,b.input.blur(),a=c.getSelectedText(b,e.parent("."+b.cssRow)),b.input.val(a),b.sggstSelectNum=b.index,b.usingChar=d,b.clickEnableFlag=0,b.decisionFlag=1,b.submitWay=2,setTimeout(function(){b.button.click()},
10),b.eventStop())});b.suggest.delegate("."+b.cssKeyword,"mousedown",function(a){if(1!=a.which)b.input.blur();else return b.mouseInput=f(this).text(),b.mouseState=1,!1});b.suggest.delegate("."+b.cssKeyword,"mouseover",function(){b.over(f(this).text())});b.suggest.delegate("."+b.cssKeyword,"mouseout",function(){b.mouseState=0});b.suggest.delegate("."+b.cssKeyword,"mousemove",function(){b.mouseMove=1});b.remarks=f('<div class="'+b.cssRemarks+'"><div class="'+b.cssRemarksBox+'"><div class="'+b.cssComment+
'">')},preSearch:function(){return!0},search:function(){var b=this,a=b.input.val(),d;b.preSearch()&&0!=b.onoffInitFlag&&(!a||b.isMatch(a,b.spaceRegExp)?(b.usingChar="",b.sggstSelectNum=-1,b.hide()):a!=b.lastInput&&(b.lastInput=a,b.backup=a,b.readyState=0,clearTimeout(b.waitTimeout),clearInterval(b.showTimer),clearTimeout(d),d=setTimeout(function(){b.index=-1;b.mouseMove=0;b.maxIndex=0;b.suggest.remove(b.remarks);c.invokeFunction(b,"search");b.waitTimeout=setTimeout(function(){clearInterval(b.showTimer)},
b.pollingTime*b.retryCount);b.showTimer=setInterval(function(){2>b.readyState||(0===b.suggest.find(b.remarks).length&&b.suggest.append(b.remarks),clearTimeout(b.waitTimeout),clearInterval(b.showTimer),3>b.readyState?setTimeout(function(){b.showInternal()},b.pollingTime):b.showInternal())},b.pollingTime)},b.justAddedToQueueTimeout),b.postSearch()))},showInternal:function(){this.mouseMove=1;1==this.onoff&&0<this.maxIndex?this.suggest.show():this.suggest.hide()},postSearch:function(){},read:function(b,
a){var c=this,d=setTimeout(function(){c.isTimeout=!0},c.ajaxSearchTimeout);c.isTimeout=!1;try{f.ajax({url:b,cache:!0,timeout:c.ajaxSearchTimeout,dataType:"jsonp",scriptCharset:c.encoding,jsonp:c.paramCallback,success:function(b){clearTimeout(d);c.isTimeout||a(b)}})}catch(j){clearTimeout(c.waitTimeout),clearInterval(c.showTimer)}},eventStart:function(){var b=this;clearInterval(b.viewEvent);b.clickEnableFlag=!0;b.decisionFlag=!1;b.viewEvent=setInterval(function(){b.nowFontSize=f("html").css("font-size");
b.currentFontSize!=b.nowFontSize&&(b.currentFontSize=b.nowFontSize,b.resize());b.controlOnElem();b.search()},100)},eventStop:function(){var b=this;clearInterval(this.viewEvent);setTimeout(function(){b.hide()},200)},hide:function(b){b&&0!=this.lastInput.length&&(this.input.val(this.backup),this.sggstSelectNum=-1,this.usingChar="");this.lastInput=this.input.val();this.suggest.hide()},select:function(b){var a=this.suggest.children("."+this.cssSelect+", ."+this.cssNoSelect);a.filter("."+this.cssSelect).removeClass(this.cssSelect).addClass(this.cssNoSelect);
a=a.filter(":visible").eq(this.index);-1!=this.index&&a.removeClass(this.cssNoSelect).addClass(this.cssSelect);b&&(b="",-1>=this.index||this.index>=this.maxIndex?(b=this.backup,this.usingChar="",this.sggstSelectNum=-1):(this.usingChar=b=c.getSelectedText(this,a),this.sggstSelectNum=this.index),this.input.val(b),this.lastInput=b)},up:function(){0==this.maxIndex||(0==this.lastInput.length||0==this.config.attr(this.configCollection).length)||(-1>=this.index&&(this.index=this.maxIndex),this.suggest.is(":visible")?
(this.index--,this.select(1)):this.respInput==this.lastInput&&1==this.onoff&&(this.select(),this.suggest.show()))},down:function(){0==this.maxIndex||(0==this.lastInput.length||0==this.config.attr(this.configCollection).length)||(this.index>=this.maxIndex&&(this.index=-1),this.suggest.is(":visible")?(this.index++,this.select(1)):this.respInput==this.lastInput&&1==this.onoff&&(this.select(),this.suggest.show()))},over:function(b){var a=this,c=-1,d=a.suggest.children("."+a.cssSelect+", ."+a.cssNoSelect);
d.filter("."+a.cssSelect).removeClass(a.cssSelect).addClass(a.cssNoSelect);d.filter(":visible").each(function(a,e){if(b==f(e).text())return c=a,!1});if(d=1==a.keywordReplaceOnMouseover&&1==a.mouseMove)a.mouseOver=1,a.input.blur(),a.input.focus();a.index=c;a.select(d);setTimeout(function(){a.mouseOver=0},50)},preJump:function(){return!0},jump:function(b){this.preJump()&&(this.scVal=1==this.decisionFlag?b:0,this.sendSubmitLog(b))},sendSubmitLog:function(b){var a=this.config.attr(this.configCollection);
if(0!=a.length){var d=this.input.val().replace(this.spaceRegExp,""),b=this.baseUrl+"/"+this.submitLogCommand+"?"+this.paramSuggestid+"="+this.suggestId+"&"+this.paramCollection+"="+a+"&"+this.paramReqid+"="+this.sggstReqid+"&"+this.paramSuggestOnOff+"="+this.onoff+"&"+this.paramSelectNum+"="+this.sggstSelectNum+"&"+this.paramSelect+"="+encodeURIComponent(this.usingChar)+"&"+this.paramSuggestUse+"="+b+"&"+this.paramSubmitWay+"="+this.submitWay+"&"+this.paramInput+"="+encodeURIComponent(d),b=b+c.addSubmitLog(this);
1==this.sendFormParam&&(b+="&"+this.paramFormParam+"="+encodeURIComponent(this.form.serialize()));0!=this.exParam.length&&(b+="&"+this.paramExParam+"="+encodeURIComponent(this.exParam));try{var g=this.encoding;this.config.attr(this.configCollection);var j;j=f.browser.msie?"jsonp":"json";setTimeout(function(){return!0},this.ajaxSubmitLogTimeout);f.ajax({url:b,cache:!0,timeout:this.ajaxSubmitLogTimeout,async:!1,dataType:j,scriptCharset:g,jsonp:this.paramCallback,success:function(){}})}catch(i){}}},
isUse:function(){return 0!=this.usingChar.length&&0==this.usingChar.indexOf(this.input.val())?1:0},judge:function(){for(var b=this,a=navigator.userAgent.toLowerCase(),c=0;c<b.blackList.length;c++){var d=b.blackList[c];if(0!=d.length&&(d=RegExp("("+d+")"),null!=d.exec(a)))return-1}if(0!=b.addBlackList.length)for(var j=b.addBlackList.split(","),c=0;c<j.length;c++)if(d=j[c],0!=d.length&&-1!=a.indexOf(d))return-1;f.browser.msie&&(b=this,c=f.browser.version,5<c&&7>c?b.IeVersion=6:6<c&&8>c&&(b.IeVersion=
7));6==b.IeVersion&&(b.onoffEnable=0);for(c=0;c<b.onOffBlackList.length;c++)if(d=b.onOffBlackList[c],0!=d.length&&(d=RegExp("("+d+")"),null!=d.exec(a))){b.onoffEnable=0;break}return b.IeVersion},preResize:function(){return!0},resize:function(){if(this.preResize()){var b=this.getTextPos(),a;7==this.IeVersion&&(b=this.getIe7TextPos(b));a=b.top;var b=b.left,c=Math.ceil(this.input.outerHeight());this.suggest.css({top:a+c,left:b});this.changeSuggestWidth();this.postResize()}},postResize:function(){},getTextPos:function(){return this.input.position()},
getIe7TextPos:function(b){var a=[],c=document.body,d=c.getBoundingClientRect(),f=(d.right-d.left)/c.offsetWidth;a.top=Math.ceil(b.top/((d.bottom-d.top)/c.offsetHeight));a.left=Math.ceil(b.left/f);return a},changeSuggestWidth:function(){var b=this.input.outerWidth(),a=this.suggest.outerWidth();b!=a&&(this.suggest.css({width:b}),a=this.suggest.find("."+this.cssKeyword),a.css({width:b-parseInt(a.css("paddingLeft"))-parseInt(a.css("paddingRight"))}))},onoffReady:function(){1==this.onoffEnable?(this.createOnElm(),
this.createOffElm(),this.checkCookie()):this.setInitOnoffNum(1)},checkCookie:function(){var b=this;f.ajax({type:"GET",url:b.baseUrl+"/"+b.cookieCommand+"?"+b.paramGroupId+"="+b.groupId+"&"+b.paramCookieMethod+"="+b.paramCookieCheck,dataType:"jsonp",timeout:500,jsonp:b.paramCallback,success:function(a){a=a.result;if("undefined"!=typeof a&&(0==a||1==a))b.setInitOnoffNum(0==a?1:0)}});setTimeout(function(){b.setInitOnoffNum(1)},1E3)},setInitOnoffNum:function(b){1!=this.onoffInitFlag&&(this.onoff=b,this.onoffInitFlag=
1,this.displayOnoff())},createOnElm:function(){var b=this;b.onElem=f("<div />").hide().attr({"class":b.cssOn,title:b.openToolTips}).click(function(){b.setOnoffNum(1);b.input.focus();setTimeout(function(){b.lastInput=""},120)});b.input.after(b.onElem)},createOffElm:function(){var b=this;b.offElem=f("<div />").attr({"class":b.cssOff,title:b.hideToolTips}).append(f("<span />").attr("class",b.cssOffImage));b.remarks.children().append(b.offElem);b.suggest.delegate("."+b.cssOff,"mousedown",function(a){if(1!=
a.which)b.input.blur();else return b.mouseState=1,b.setOnoffNum(0),b.input.blur(),!1});b.suggest.delegate("."+b.cssOff,"mouseout",function(){b.mouseState=0})},setOnoffNum:function(b){this.onoff=b;this.setCookie(b);this.displayOnoff()},setCookie:function(b){f.ajax({type:"GET",url:this.baseUrl+"/"+this.cookieCommand+"?"+this.paramGroupId+"="+this.groupId+"&"+this.paramCookieMethod+"="+(1==b?this.paramCookieDelete:this.paramCookieAdd),dataType:"jsonp",timeout:500,jsonp:this.paramCallback,success:function(){}})},
displayOnoff:function(){1==this.onoffEnable&&(1==this.onoff?(this.onElem.hide(),this.resize(),this.input.attr("autocomplete","off")):(this.resize(),this.input.attr("autocomplete",""),this.controlOnElem(),this.suggest.hide()))},controlOnElem:function(){1!=this.onoffEnable||(0!=this.onoff||0==this.byteNumToHideOpenSggst)||(1==this.isByteLengthOver(this.input.val(),this.byteNumToHideOpenSggst)?this.onElem.hide():this.onElem.is(":visible")||this.onElem.show())},isSuggestUse:function(){return"undefined"!=
typeof this.scVal&&1==this.scVal},isMatch:function(b,a){return b&&RegExp(a).test(b)?!0:!1},isInRange:function(b,a,c){b=parseInt(b);return!isNaN(b)&&b>=a&&b<=c},isNotEmptyArray:function(b){return"object"===typeof b&&"function"===typeof b.pop&&0<b.length},createWordLine:function(b){if(!b||this.isMatch(b,this.spaceRegExp))return"";for(var b=this.escapeHtml(b),a=this.respInput.toLowerCase().split(this.whitespaceMatcher),c,d=0,f=a.length;d<f;d++)c=this.escapeHtml(a[d]),b=b.replace(RegExp("(^|\\s)("+this.escapeRegExp(c)+
")"),"$1<strong>$2</strong>");return b},escapeRegExp:function(a){return a.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")},isByteLengthOver:function(a,c){if(void 0===a)return 0;var d=0,f="",j=a.length,i;for(i=0;i<j;i++)if(f=escape(a.charAt(i)),d+=4>f.length&&!/%[0|1|8-9|A-F]\w|%7F/.test(f)?1:2,d>c)return 1;return 0}};f(function(){(new d).init("#sggstConfig")})}})();
(function(){if("undefined"!=typeof jQuery){var f=jQuery.noConflict();if(!("undefined"==typeof searchplat||"undefined"==typeof searchplat.suggest||"undefined"==typeof searchplat.suggest.plugins)){var h=function(){};h.prototype={cssRow:"swgRow",paramGenre:"ge",paramGenreUse:"gu",paramOutputFormat:"of",paramSortLogic:"sl",maxRows:10,maxAddGenreRows:1,maxEachGenreRows:3,noGenreId:"0",swgQuery:"swg",swgOutput:"osgenre",gbQuery:"",gbOutput:"osgenre",genreSelectBox:f([{value:this.noGenreId,isDummy:!0}]),
validateConfig:function(a){var c=a.config;if(void 0==c||!a.isMatch(c.attr("selectboxId"),/^[a-zA-Z0-9_\-]+$/))return!1;var d=c.attr("maxRows");if(d&&!a.isInRange(d,10,30)||(d=c.attr("maxAddGenreRows"))&&!a.isInRange(d,1,10)||(d=c.attr("maxEachGenreRows"))&&!a.isInRange(d,3,10)||(d=c.attr("noGenreId"))&&!a.isMatch(d,/^[a-zA-Z0-9_\-]+$/)||(d=c.attr("swgQuery"))&&!a.isMatch(d,/^[^<>]+$/))return!1;this.swgQuery=d||this.swgQuery;if((d=c.attr("swgOutput"))&&!a.isMatch(d,/^[^<>]+$/)||(d=c.attr("genreBoostQuery"))&&
!a.isMatch(d,/^[^<>]+$/))return!1;this.gbQuery=d||this.gbQuery;return(c=c.attr("genreBoostOutput"))&&!a.isMatch(c,/^[^<>]+$/)?!1:!0},init:function(a){var c=this,d=a.config;if(!c.validateConfig(a))return!1;c.maxRows=d.attr("maxRows")||c.maxRows;c.maxAddGenreRows=d.attr("maxAddGenreRows")||c.maxAddGenreRows;c.maxEachGenreRows=d.attr("maxEachGenreRows")||c.maxEachGenreRows;var b=d.attr("selectboxId");c.noGenreId=d.attr("noGenreId")||"0";"undefined"!=typeof b&&0<b.length&&(c.genreSelectBox=f("#"+b));
if("undefined"==typeof c.genreSelectBox.val()||!c.genreSelectBox.attr("isDummy")&&0==c.genreSelectBox.find("option[value="+c.noGenreId+"]").length)return a.config=f(),!1;a.form.bind("reset",function(){setTimeout(function(){c.genreSelectBox.val(c.noGenreId)},a.afterWaitingforEventTimeout)});d.attr("genreBoostOutput");c.genreSelectBox.getAddingQuery=function(){var a;this.val()==c.noGenreId?a=c.paramSortLogic+"="+c.swgQuery+"&"+c.paramOutputFormat+"="+c.swgOutput:(a=c.paramGenre+"="+this.val()+"&"+c.paramOutputFormat+
"="+c.gbOutput,c.gbQuery&&(a+="&"+c.paramSortLogic+"="+c.gbQuery));return a};c.genreSelectBox.change(function(){a.respInput=""});var e=c.genreSelectBox.attr("name")||"g";c.genreSelectBox.setGenreId=function(){var d=c.getGenreId(a),g=b+"_hidden_for_suggest";a.form.children("#"+g).length&&a.form.children("#"+g).remove();this.val()==c.noGenreId&&0<d.length&&(c.genreHidden=f("<input />").attr("id",g).attr("name",e).attr("type","hidden").val(d),c.genreHidden.appendTo(a.form),this.isDummy||f(this).removeAttr("name"))};
0==f("body[onunload]").length&&f(window).bind("unload",function(){});a.getTextPos=function(){return this.input.offset()};a.button.bind("click.swg",function(){try{c.genreSelectBox.setGenreId(),a.jump(a.isUse())}catch(b){}return!0});return!0},createSuggestElems:function(a){for(var c='<span class="'+a.cssKeyword+'"></span></div>',d='<div class="'+a.cssNoSelect+" "+a.cssRow+'">'+c,a='<div class="'+a.cssNoSelect+" "+this.cssRow+'">'+c,c="",b=0,e=0,f=0,g=this.maxRows;f<g;f++)0==f?c+=d:b<this.maxAddGenreRows&&
e<this.maxEachGenreRows?(c+=a,e++,e==this.maxEachGenreRows&&b++):(c+=d,b++);return c},postInit:function(a){var c=this;a.suggest.find("."+c.cssRow+" > ."+a.cssKeyword).bind("mouseup",function(d){d.stopPropagation();var b=f(this),e=b.text();1!=d.which||(a.mouseInput!=e||0==a.clickEnableFlag)||(a.over(b.text()),a.mouseState=2,a.input.blur(),a.input.val(c.getSelectText(b)),a.sggstSelectNum=a.index,a.usingChar=e,a.clickEnableFlag=0,a.decisionFlag=1,a.submitWay=2,setTimeout(function(){a.button.click()},
a.justAddedToQueueTimeout),a.eventStop())})},getValidIntValue:function(a,c,d,b){a=isNaN(a)||0==a.length?c:parseInt(a);return a<d?d:a>b?b:a},getSelectText:function(a){a=a.clone();a.children("span").remove();return a.text()},getGenreId:function(a){a=a.suggest.children(":eq("+a.sggstSelectNum+"):not(."+a.cssNoSelect+")").children("."+a.cssKeyword).children("span[key]");return 0===a.length?"":a.attr("key")},search:function(a){var c=this,d=a.lastInput.replace(a.spaceRegExp,"");if(0==d.length)a.readyState+=
2;else{var b=a.config.attr(a.configCollection),e=b+c.genreSelectBox.val();"undefined"==typeof a.resultCache[e]&&(a.resultCache[e]={});e=a.resultCache[e];if("undefined"==typeof e[d])try{var f=a.baseUrl+"/"+a.searchCommand+"?"+a.paramCollection+"="+b+"&"+a.paramReqid+"="+a.sggstReqid+"&"+a.paramSuggestid+"="+a.suggestId+"&"+a.paramInput+"="+encodeURIComponent(d)+"&"+a.paramEncoding+"="+a.encoding+"&"+c.genreSelectBox.getAddingQuery();0!=a.exParam.length&&(f+="&"+a.exParam);a.read(f,function(b){c.show(a,
b)})}catch(g){a.readyState+=2}else c.show(a,e[d])}},show:function(a,c){var d=this,b=f.extend(!0,[],c),e=b[1],b=b[2];a.suggest.children("."+a.cssRow+", ."+d.cssRow).hide();if(a.isNotEmptyArray(e)&&a.isNotEmptyArray(b)){var h=b[0],g=b[1];if(a.isNotEmptyArray(h)&&"object"==typeof g){var b=a.lastInput,j=a.config.attr(a.configCollection)+d.genreSelectBox.val();"undefined"==typeof a.resultCache[j][b]&&(a.resultCache[j][b]=c);var i=e.length;i>d.maxRows&&(i=d.maxRows);a.respInput=a.lastInput;var n=0,b=a.suggest.children("."+
a.cssRow);b.filter("."+a.cssSelect).removeClass(a.cssSelect).addClass(a.cssNoSelect);b.each(function(b,c){var d=f(c);if(b<i){var g=a.createWordLine(e[b]);d.show().children("."+a.cssKeyword).html(g);n++}else d.hide()});var k=0,m=0,b=a.suggest.children("."+d.cssRow);b.filter("."+a.cssSelect).removeClass(a.cssSelect).addClass(a.cssNoSelect);b.each(function(b,c){var i=f(c),j=a.createWordLine(e[k]);genreIds=h[k];existSwg=!1;if("undefined"!=typeof genreIds){var p=genreIds[m],t=g[p]||" ";a.isMatch(p,/^[^\s]+/)&&
(existSwg=!0,i.show().children("."+a.cssKeyword).html(j+('<span key="'+p+'">'+t+"</span>")),n++)}existSwg||i.hide();m++;m>=d.maxEachGenreRows&&(k++,m=0)});a.maxIndex+=n}}a.readyState+=2},addSubmitLog:function(){var a,c="&"+this.paramGenre+"="+this.genreSelectBox.val();a="undefined"==typeof this.genreHidden?this.noGenreId:this.genreHidden.val();return c+="&"+this.paramGenreUse+"="+a},getSelectedText:function(a,c){var d=f(c);return d.has("."+self.cssRow)?(d=d.children("."+a.cssKeyword).clone(),d.children("span").remove(),
d.text()):null}};h=new h;searchplat.suggest.plugins.add(h)}}})();
(function(){if("undefined"!=typeof jQuery){var f=jQuery.noConflict();if(!("undefined"===typeof searchplat||"undefined"===typeof searchplat.suggest||"undefined"===typeof searchplat.suggest.plugins)){var h=function(){};h.prototype={cnaviCache:null,destinationStartMark:"<em>",destinationEndMark:"</em>",destinationRegExp:/<em>(.*)<\/em>/,cssEmphasize:"cnaviEm",cssRow:"cnaviRow",cssImg:"cnaviImg",cssLink:"cnaviLink",cssHorizon:"cnaviBorder",rowCount:1,searchCount:2,searchCommand:"cnavi",paramCNaviUse:"cu",
paramSearchCount:"h",paramLanguage:"lr",paramSecondLanguage:"lang",cnaviCollectionKey:"cnavicol",lang:"ja",secondLang:"",cnaviCollection:null,selectboxId:null,noGenreId:"0",genreSelectBox:null,ignoreUrls:[],partsname:"suggestcn1",channel:null,func:"Suggest",parts:null,validateConfig:function(a){var c=a.config;if(void 0==c||!a.isMatch(c.attr("channel"),/^[a-zA-Z0-9_\-]+$/)||!a.isMatch(c.attr("parts"),/^[a-zA-Z0-9_\-]+$/))return!1;var d=c.attr("cnaviRowCount");return d&&!a.isInRange(d,10,30)||(d=c.attr("cnaviSearchCount"))&&
!a.isInRange(d,1,10)||(d=c.attr("lang"))&&!this.isMatch(d,/^[a-zA-Z0-9_\-]+$/)||(d=c.attr("secondLang"))&&!this.isMatch(d,/^[a-zA-Z0-9_\-]+$/)||(d=c.attr("selectboxId"))&&!this.isMatch(d,/^[a-zA-Z0-9_\-]+$/)||(d=c.attr("noGenreId"))&&!a.isMatch(d,/^[a-zA-Z0-9_\-]+$/)||(a=c.attr("ignoreUrls"))&&!this.isMatch(a,/^https?:\/\/.+$/)||(a=c.attr(this.cnaviCollectionKey))&&!this.isMatch(a,/^[a-zA-Z0-9_\-]+$/)?!1:(c=c.attr("partsname"))&&!this.isMatch(c,/^[a-zA-Z0-9_\-]+$/)?!1:!0},init:function(a){var c=this,
d=a.config,b=d.attr(a.configCollection);c.rowCount=d.attr("cnaviRowCount")||c.rowCount;c.searchCount=d.attr("cnaviSearchCount")||c.searchCount;c.channel=d.attr("channel");c.parts=d.attr("parts");c.partsname=d.attr("partsname")||c.partsname;c.lang=d.attr("lang")||c.lang;c.secondLang=d.attr("secondLang")||c.secondLang;c.cnaviCollection=d.attr(c.cnaviCollectionKey)||b;c.cnaviCache=a.resultCache[c.cnaviCollection+c.searchCommand]={};c.selectboxId=d.attr("selectboxId")||c.selectboxId;c.selectboxId&&(c.genreSelectBox=
f("#"+c.selectboxId));c.noGenreId=d.attr("noGenreId")||c.noGenreId;if(d=d.attr("ignoreUrls"))c.ignoreUrls=d.split(",");a.input.bind("keydown.cnavi",function(b){if(13==b.keyCode&&1==a.clickEnableFlag){b=a.suggest.children("."+c.cssRow);if(!b.is("."+a.cssSelect+":visible"))return!0;a.clickEnableFlag=0;a.decisionFlag=1;c.cnaviSubmit(a,b,1);return!1}});return!0},createSuggestElems:function(a){for(var a='<div class="'+a.cssNoSelect+" "+this.cssRow+'"><a href="" class="'+this.cssLink+'"><hr class="'+this.cssHorizon+
'" /><span class="'+a.cssKeyword+'"></span></a></div>',c="",d=0,b=this.rowCount;d<b;d++)c+=a;return c},postInit:function(a){var c=this,d=a.suggest.find("."+c.cssRow).find("."+c.cssLink),b=d.find("."+a.cssKeyword);d.bind("click",function(b){b.preventDefault();b=f(this).parents("."+c.cssRow).first();c.cnaviSubmit(a,b,2)});b.bind("mouseup",function(a){a.stopPropagation()}).bind("mouseover",function(){a.over(a.lastInput)})},search:function(a){var c=this,d=a.lastInput;if(0==d.length)a.readyState+=1;else{var b=
c.cnaviCollection;if("undefined"==typeof c.cnaviCache[d])try{var e=a.baseUrl+"/"+c.searchCommand+"?"+a.paramCollection+"="+b+"&"+a.paramReqid+"="+a.sggstReqid+"&"+a.paramSuggestid+"="+a.suggestId+"&"+a.paramInput+"="+encodeURIComponent(d)+"&"+a.paramEncoding+"="+a.encoding+"&"+c.paramSearchCount+"="+c.searchCount+"&"+c.paramLanguage+"="+c.lang;0!=c.secondLang.length&&(e+="&"+c.paramSecondLanguage+"="+c.secondLang);0!=a.exParam.length&&(e+="&"+a.exParam);a.suggest.children("."+c.cssRow).hide();a.read(e,
function(b){c.show(a,b)})}catch(f){a.readyState+=1}else c.show(a,c.cnaviCache[d])}},show:function(a,c){if("object"==typeof c[4]){var d=f.extend(!0,{},c[4]),b=d.destination,e=d.sentence,h=d.imageurl,d=d.queryurl;if(a.isNotEmptyArray(b)&&a.isNotEmptyArray(e)&&a.isNotEmptyArray(h)&&a.isNotEmptyArray(d)){var g=a.lastInput;"undefined"==typeof this.cnaviCache[g]&&(this.cnaviCache[g]=c);a.respInput=a.lastInput;var b=b.length,g=0,j=a.suggest.children("."+this.cssRow);j.removeClass(a.cssSelect).addClass(a.cssNoSelect);
var i=0;a:for(;i<b&&!(g>=this.rowCount);i++){var n=j.eq(g),k=e[i],m=h[i],q=d[i],l="",r;if(a.isMatch(k,/^[^\s]+/)&&a.isMatch(q,/^https?:\/\/.+$/)&&(k.match(this.destinationRegExp),r=a.escapeHtml(RegExp.$1),k=k.replace(this.destinationStartMark,""),k=k.replace(this.destinationEndMark,""),!(-1<location.href.indexOf(q)))){if(this.genreSelectBox&&this.genreSelectBox.val()!=this.noGenreId)for(var s=0,p=this.ignoreUrls.length;s<p;s++)if(-1<q.indexOf(this.ignoreUrls[s]))continue a;n.find("a."+this.cssLink).attr("href",
q);a.isMatch(m,/^[a-zA-Z0-9\/:\._\-]+$/)&&(l+='<img src="'+m+'" class="'+this.cssImg+'" />');l+=a.escapeHtml(k);-1<l.indexOf(r)&&(l=l.replace(r,'<span class="'+this.cssEmphasize+'">'+r+"</span>"));n.show().find("."+a.cssKeyword).html(l);g++}}a.maxIndex+=g}}a.readyState+=1},getSelectedText:function(a,c){return f(c).has("."+self.cssRow)?a.backup:null},cnaviSubmit:function(a,c,d){var b=c.find("."+this.cssLink).attr("href");this.isCNaviUsed=!0;a.submitWay=d;a.usingChar=c.find("."+this.cssEmphasize).text();
"function"===typeof s_partsCounter&&s_partsCounter(this.partsname);"function"===typeof ontrackingidAjax&&(1==d?ontrackingidAjax(this.channel,this.func,this.parts,"Enter"):2==d&&ontrackingidAjax(this.channel,this.func,this.parts,"Click"));this.cnaviCollection&&(a.configCollection=this.cnaviCollectionKey);a.jump(1);setTimeout(function(){window.location.href=b},a.afterWaitingforEventTimeout);a.eventStop()},addSubmitLog:function(){var a="";return a="&"+this.paramCNaviUse+"="+(this.isCNaviUsed?"1":"0")}};
h=new h;searchplat.suggest.plugins.add(h)}}})();
