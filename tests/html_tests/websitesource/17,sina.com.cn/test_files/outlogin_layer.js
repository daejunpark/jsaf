(function(){if(!a){var a=(function(){var g={};var b="theia";var d=[];var c=200;var f;g[b]={IE:/msie/i.test(navigator.userAgent),E:function(h){if(typeof h==="string"){return document.getElementById(h)}else{return h}},C:function(h){var i;h=h.toUpperCase();if(h=="TEXT"){i=document.createTextNode("")}else{if(h=="BUFFER"){i=document.createDocumentFragment()}else{i=document.createElement(h)}}return i},log:function(){var n,m=arguments,j=m.length,i=[].slice.apply(m,[0,j]),k="error",h;while(i[--j]){if(i[j] instanceof Error){n=i.splice(j,1)[0];break}}if(!n){n=new Error();k="log"}h=[i,k,new Date().getTime(),n.message,n.stack];if(f){try{f.apply(null,h)}catch(o){}}else{d.length>=c&&d.shift();d.push(h)}},_regLogFn:function(h){f=h},_clearLogList:function(){return d.splice(0,d.length)}};var e=g[b];e.register=function(m,h,l){if(!l||typeof l!="string"){l=b}if(!g[l]){g[l]={}}var j=g[l];var o=m.split(".");var n=j;var i=null;while(i=o.shift()){if(o.length){if(n[i]===undefined){n[i]={}}n=n[i]}else{if(n[i]===undefined){try{if(l&&l!==b){if(m==="core.util.listener"){n[i]=g[b].core.util.listener;return true}if(m==="core.util.connect"){n[i]=g[b].core.util.connect;return true}}n[i]=h(j);return true}catch(p){setTimeout(function(){console.log(p)},0)}}}}return false};e.unRegister=function(l,j){if(!j||typeof j!="string"){j=b}var i=g[j];var n=l.split(".");var m=i;var h=null;while(h=n.shift()){if(n.length){if(m[h]===undefined){return false}m=m[h]}else{if(m[h]!==undefined){delete m[h];return true}}}return false};e.regShort=function(h,i){if(e[h]!==undefined){throw"["+h+"] : short : has been register"}e[h]=i};e.shortRegister=function(m,h,l){if(!l||typeof l!="string"){l=b}var j=g[l];var o=m.split(".");if(!h){return false}if(j[h]){return false}var n=j;var i=null;while(i=o.shift()){if(o.length){if(n[i]===undefined){return false}n=n[i]}else{if(n[i]!==undefined){if(j[h]){return false}j[h]=n[i];return true}}}return false};e.getPKG=function(h){if(!h||typeof h!="string"){h=b}return g[h]};return e})()}a.register("core.arr.isArray",function(b){return function(c){return Object.prototype.toString.call(c)==="[object Array]"}});a.register("core.arr.foreach",function(d){var b=function(k,g){var j=[];for(var h=0,f=k.length;h<f;h+=1){var e=g(k[h],h);if(e===false){break}else{if(e!==null){j[h]=e}}}return j};var c=function(i,f){var h={};for(var g in i){var e=f(i[g],g);if(e===false){break}else{if(e!==null){h[g]=e}}}return h};return function(f,e){if(d.core.arr.isArray(f)||(f.length&&f[0]!==undefined)){return b(f,e)}else{if(typeof f==="object"){return c(f,e)}}return null}});a.register("core.arr.indexOf",function(b){return function(e,f){if(f.indexOf){return f.indexOf(e)}for(var d=0,c=f.length;d<c;d++){if(f[d]===e){return d}}return -1}});a.register("core.arr.inArray",function(b){return function(c,d){return b.core.arr.indexOf(c,d)>-1}});a.register("core.evt.addEvent",function(b){return function(e,d,c){e=b.E(e);if(e==null){return false}if(typeof c!=="function"){return false}if(e.addEventListener){e.addEventListener(d,c,false)}else{if(e.attachEvent){e.attachEvent("on"+d,c)}else{e["on"+d]=c}}return true}});a.register("core.util.browser",function(i){var b=navigator.userAgent.toLowerCase();var l=window.external||"";var d,f,g,n,h;var c=function(e){var m=0;return parseFloat(e.replace(/\./g,function(){return(m++==1)?"":"."}))};try{if((/windows|win32/i).test(b)){h="windows"}else{if((/macintosh/i).test(b)){h="macintosh"}else{if((/rhino/i).test(b)){h="rhino"}}}if((f=b.match(/applewebkit\/([^\s]*)/))&&f[1]){d="webkit";n=c(f[1])}else{if((f=b.match(/presto\/([\d.]*)/))&&f[1]){d="presto";n=c(f[1])}else{if(f=b.match(/msie\s([^;]*)/)){d="trident";n=1;if((f=b.match(/trident\/([\d.]*)/))&&f[1]){n=c(f[1])}}else{if(/gecko/.test(b)){d="gecko";n=1;if((f=b.match(/rv:([\d.]*)/))&&f[1]){n=c(f[1])}}}}}if(/world/.test(b)){g="world"}else{if(/360se/.test(b)){g="360"}else{if((/maxthon/.test(b))||typeof l.max_version=="number"){g="maxthon"}else{if(/tencenttraveler\s([\d.]*)/.test(b)){g="tt"}else{if(/se\s([\d.]*)/.test(b)){g="sogou"}}}}}}catch(k){}var j={OS:h,CORE:d,Version:n,EXTRA:(g?g:false),IE:/msie/.test(b),OPERA:/opera/.test(b),MOZ:/gecko/.test(b)&&!/(compatible|webkit)/.test(b),IE5:/msie 5 /.test(b),IE55:/msie 5.5/.test(b),IE6:/msie 6/.test(b),IE7:/msie 7/.test(b),IE8:/msie 8/.test(b),IE9:/msie 9/.test(b),IE10:/msie 10/.test(b),SAFARI:!/chrome\/([\d.]*)/.test(b)&&/\/([\da-f.]*) safari/.test(b),CHROME:/chrome\/([\d.]*)/.test(b),IPAD:/\(ipad/i.test(b),IPHONE:/\(iphone/i.test(b),ITOUCH:/\(itouch/i.test(b),MOBILE:/mobile/i.test(b)};return j});a.register("core.func.getType",function(b){return function(c){var d;return((d=typeof(c))=="object"?c==null&&"null"||Object.prototype.toString.call(c).slice(8,-1):d).toLowerCase()}});a.register("core.dom.ready",function(h){var d=[];var m=false;var l=h.core.func.getType;var i=h.core.util.browser;var g=h.core.evt.addEvent;var j=function(){if(!m){if(document.readyState==="complete"){return true}}return m};var e=function(){if(m==true){return}m=true;for(var o=0,n=d.length;o<n;o++){if(l(d[o])==="function"){try{d[o].call()}catch(p){}}}d=[]};var b=function(){if(j()){e();return}try{document.documentElement.doScroll("left")}catch(n){setTimeout(arguments.callee,25);return}e()};var c=function(){if(j()){e();return}setTimeout(arguments.callee,25)};var f=function(){g(document,"DOMContentLoaded",e)};var k=function(){g(window,"load",e)};if(!j()){if(h.IE&&window===window.top){b()}f();c();k()}return function(n){if(j()){if(l(n)==="function"){n.call()}}else{d.push(n)}}});a.register("core.dom.isNode",function(b){return function(c){return(c!=undefined)&&Boolean(c.nodeName)&&Boolean(c.nodeType)}});a.register("core.dom.insertBefore",function(b){return function(d,e){var c=e.parentNode;c.insertBefore(d,e)}});a.register("core.dom.setStyle",function(c){function b(){if("y" in b){return b.y}return b.y=("filters" in c.C("div"))}return function(d,e,f){if(b()){switch(e){case"opacity":d.style.filter="alpha(opacity="+(f*100)+")";if(!d.currentStyle||!d.currentStyle.hasLayout){d.style.zoom=1}break;case"float":e="styleFloat";default:d.style[e]=f}}else{if(e=="float"){e="cssFloat"}d.style[e]=f}}});a.register("core.dom.getStyle",function(c){function b(){if("y" in b){return b.y}return b.y=("filters" in c.C("div"))}return function(f,h){if(b()){switch(h){case"opacity":var j=100;try{j=f.filters["DXImageTransform.Microsoft.Alpha"].opacity}catch(i){try{j=f.filters("alpha").opacity}catch(i){}}return j/100;case"float":h="styleFloat";default:var g=f.currentStyle?f.currentStyle[h]:null;return(f.style[h]||g)}}else{if(h=="float"){h="cssFloat"}try{var d=document.defaultView.getComputedStyle(f,"")}catch(i){}return f.style[h]||d?d[h]:null}}});a.register("core.util.hideContainer",function(d){var e;var b=function(){if(e){return}e=d.C("div");e.style.cssText="position:absolute;top:-9999px;left:-9999px;";document.getElementsByTagName("head")[0].appendChild(e)};var c={appendChild:function(f){if(d.core.dom.isNode(f)){b();e.appendChild(f)}},removeChild:function(f){if(d.core.dom.isNode(f)){e&&e.removeChild(f)}}};return c});a.register("core.dom.getSize",function(c){var b=function(e){if(!c.core.dom.isNode(e)){throw"core.dom.getSize need Element as first parameter"}return{width:e.offsetWidth,height:e.offsetHeight}};var d=function(f){var e=null;if(f.style.display==="none"){f.style.visibility="hidden";f.style.display="";e=b(f);f.style.display="none";f.style.visibility="visible"}else{e=b(f)}return e};return function(f){var e={};if(!f.parentNode){c.core.util.hideContainer.appendChild(f);e=d(f);c.core.util.hideContainer.removeChild(f)}else{e=d(f)}return e}});a.register("core.util.scrollPos",function(b){return function(e){e=e||document;var c=e.documentElement;var d=e.body;return{top:Math.max(window.pageYOffset||0,c.scrollTop,d.scrollTop),left:Math.max(window.pageXOffset||0,c.scrollLeft,d.scrollLeft)}}});a.register("core.obj.parseParam",function(b){return function(e,d,c){var f,g={};d=d||{};for(f in e){g[f]=e[f];if(d[f]!=null){if(c){if(e.hasOwnProperty(f)){g[f]=d[f]}}else{g[f]=d[f]}}}return g}});a.register("core.dom.position",function(d){var b=function(h){var i,g,f,e,k,j;i=h.getBoundingClientRect();g=d.core.util.scrollPos();f=h.ownerDocument.body;e=h.ownerDocument.documentElement;k=e.clientTop||f.clientTop||0;j=e.clientLeft||f.clientLeft||0;return{l:parseInt(i.left+g.left-j,10)||0,t:parseInt(i.top+g.top-k,10)||0}};var c=function(g,e){var h,f;h=[g.offsetLeft,g.offsetTop];f=g.offsetParent;if(f!==g&&f!==e){while(f){h[0]+=f.offsetLeft;h[1]+=f.offsetTop;f=f.offsetParent}}if(d.core.util.browser.OPERA!=-1||(d.core.util.browser.SAFARI!=-1&&g.style.position=="absolute")){h[0]-=document.body.offsetLeft;h[1]-=document.body.offsetTop}if(g.parentNode){f=g.parentNode}else{f=null}while(f&&!/^body|html$/i.test(f.tagName)&&f!==e){if(f.style.display.search(/^inline|table-row.*$/i)){h[0]-=f.scrollLeft;h[1]-=f.scrollTop}f=f.parentNode}return{l:parseInt(h[0],10),t:parseInt(h[1],10)}};return function(g,e){if(g==document.body){return false}if(g.parentNode==null){return false}if(g.style.display=="none"){return false}var f=d.core.obj.parseParam({parent:null},e);if(g.getBoundingClientRect){if(f.parent){var i=b(g);var h=b(f.parent);return{l:i.l-h.l,t:i.t-h.t}}else{return b(g)}}else{return c(g,f.parent||document.body)}}});a.register("core.dom.hasClassName",function(b){return function(d,c){return(new RegExp("(^|\\s)"+c+"($|\\s)").test(d.className))}});a.register("core.str.trim",function(b){return function(f){if(typeof f!=="string"){throw"trim need a string as parameter"}var c=f.length;var e=0;var d=/(\u3000|\s|\t|\u00A0)/;while(e<c){if(!d.test(f.charAt(e))){break}e+=1}while(c>e){if(!d.test(f.charAt(c-1))){break}c-=1}return f.slice(e,c)}});a.register("core.dom.addClassName",function(b){return function(d,c){if(d.nodeType===1){if(!b.core.dom.hasClassName(d,c)){d.className=b.core.str.trim(d.className)+" "+c}}}});a.register("core.dom.removeClassName",function(b){return function(d,c){if(d.nodeType===1){if(b.core.dom.hasClassName(d,c)){d.className=d.className.replace(new RegExp("(^|\\s)"+c+"($|\\s)")," ")}}}});a.register("core.util.getUniqueKey",function(d){var b=(new Date()).getTime().toString(),c=1;return function(){return b+(c++)}});a.register("core.dom.uniqueID",function(b){return function(c){return c&&(c.uniqueID||(c.uniqueID=b.core.util.getUniqueKey()))}});a.register("core.evt.removeEvent",function(b){return function(e,d,c){e=b.E(e);if(e==null){return false}if(typeof c!=="function"){return false}if(e.removeEventListener){e.removeEventListener(d,c,false)}else{if(e.detachEvent){e.detachEvent("on"+d,c)}}e["on"+d]=null;return true}});a.register("core.evt.getEvent",function(b){return(function(){if(document.addEventListener){return function(){var d=arguments.callee;var c;do{c=d.arguments[0];if(c&&(c.constructor==Event||c.constructor==MouseEvent||c.constructor==KeyboardEvent)){return c}}while(d=d.caller);return c}}else{return function(e,d,c){return window.event}}}())});a.register("core.evt.fixEvent",function(c){var b="clientX clientY pageX pageY screenX screenY".split(" ");return function(g){g=g||c.core.evt.getEvent();if(!g.target){g.target=g.srcElement||document}if(g.pageX==null&&g.clientX!=null){var f=document.documentElement;var d=document.body;g.pageX=g.clientX+(f.scrollLeft||d&&d.scrollLeft||0)-(f.clientLeft||d&&d.clientLeft||0);g.pageY=g.clientY+(f.scrollTop||d&&d.scrollTop||0)-(f.clientTop||d&&d.clientTop||0)}if(!g.which&&g.button){if(g.button&1){g.which=1}else{if(g.button&4){g.which=2}else{if(g.button&2){g.which=3}}}}if(g.relatedTarget===undefined){g.relatedTarget=g.fromElement||g.toElement}if(g.layerX==null&&g.offsetX!=null){g.layerX=g.offsetX;g.layerY=g.offsetY}return g}});a.register("core.evt.preventDefault",function(b){return function(c){c=c||b.core.evt.getEvent();if(c.preventDefault){c.preventDefault()}else{c.returnValue=false}}});a.register("core.evt.custEvent",function(d){var i="__custEventKey__",c=1,h={},e=function(m,l){var k=(typeof m=="number")?m:m[i];return(k&&h[k])&&{obj:(typeof l=="string"?h[k][l]:h[k]),key:k}};var g={};var j=function(p,m,l,n,k){if(p&&typeof m=="string"&&l){var o=e(p,m);if(!o||!o.obj){throw"custEvent ("+m+") is undefined !"}o.obj.push({fn:l,data:n,once:k});return o.key}};var b=function(m,t,r,n){var v=true;var p=function(){v=false};if(m&&typeof t=="string"){var k=e(m,t),q;if(k&&(q=k.obj)){r=typeof r!="undefined"&&[].concat(r)||[];for(var l=q.length-1;l>-1&&q[l];l--){var u=q[l].fn;var s=q[l].once;if(u&&u.apply){try{u.apply(m,[{obj:m,type:t,data:q[l].data,preventDefault:p}].concat(r));if(s){q.splice(l,1)}}catch(o){d.log("[error][custEvent]"+o.message,o,o.stack)}}}if(v&&d.core.func.getType(n)==="function"){n()}return k.key}}};var f={define:function(o,m){if(o&&m){var l=(typeof o=="number")?o:o[i]||(o[i]=c++),n=h[l]||(h[l]={});m=[].concat(m);for(var k=0;k<m.length;k++){n[m[k]]||(n[m[k]]=[])}return l}},undefine:function(n,m){if(n){var l=(typeof n=="number")?n:n[i];if(l&&h[l]){if(m){m=[].concat(m);for(var k=0;k<m.length;k++){if(m[k] in h[l]){delete h[l][m[k]]}}}else{delete h[l]}}}},add:function(n,l,k,m){return j(n,l,k,m,false)},once:function(n,l,k,m){return j(n,l,k,m,true)},remove:function(p,n,m){if(p){var o=e(p,n),q,k;if(o&&(q=o.obj)){if(d.core.arr.isArray(q)){if(m){var l=0;while(q[l]){if(q[l].fn===m){break}l++}q.splice(l,1)}else{q.splice(0,q.length)}}else{for(var l in q){q[l]=[]}}return o.key}}},fire:function(n,m,k,l){return b(n,m,k,l)},hook:function(t,v,n){if(!t||!v||!n){return}var q=[],o=t[i],r=o&&h[o],l,u=v[i]||(v[i]=c++),k;if(r){k=g[o+"_"+u]||(g[o+"_"+u]={});var s=function(x){var w=true;b(v,k[x.type].type,Array.prototype.slice.apply(arguments,[1,arguments.length]),function(){w=false});w&&x.preventDefault()};for(var p in n){var m=n[p];if(!k[p]){if(l=r[p]){l.push({fn:s,data:undefined});k[p]={fn:s,type:m};q.push(m)}}}f.define(v,q)}},unhook:function(r,l,q){if(!r||!l||!q){return}var n=r[i],p=l[i],k=g[n+"_"+p];if(k){for(var m in q){var o=q[m];if(k[m]){f.remove(r,m,k[m].fn)}}}},destroy:function(){h={};c=1;g={}}};return f});a.register("core.func.empty",function(){return function(){}});a.register("core.dom.removeNode",function(b){return function(c){c=b.E(c)||c;try{c.parentNode.removeChild(c)}catch(d){}}});a.register("core.str.parseURL",function(b){return function(e){var d=/^(?:([A-Za-z]+):(\/{0,3}))?([0-9.\-A-Za-z]+\.[0-9A-Za-z]+)?(?::(\d+))?(?:\/([^?#]*))?(?:\?([^#]*))?(?:#(.*))?$/;var j=["url","scheme","slash","host","port","path","query","hash"];var g=d.exec(e);var h={};for(var f=0,c=j.length;f<c;f+=1){h[j[f]]=g[f]||""}return h}});a.register("core.json.queryToJson",function(b){return function(e,j){var l=b.core.str.trim(e).split("&");var k={};var d=function(i){if(j){return decodeURIComponent(i)}else{return i}};for(var g=0,h=l.length;g<h;g++){if(l[g]){var f=l[g].split("=");var c=f[0];var m=f[1];if(f.length<2){m=c;c="$nullName"}if(!k[c]){k[c]=d(m)}else{if(b.core.arr.isArray(k[c])!=true){k[c]=[k[c]]}k[c].push(d(m))}}}return k}});a.register("core.json.jsonToQuery",function(b){var c=function(e,d){e=e==null?"":e;e=b.core.str.trim(e.toString());if(d){return encodeURIComponent(e)}return e};return function(h,f){var j=[];if(typeof h=="object"){for(var e in h){if(e==="$nullName"){j=j.concat(h[e]);continue}if(h[e] instanceof Array){for(var g=0,d=h[e].length;g<d;g++){j.push(e+"="+c(h[e][g],f))}}else{if(typeof h[e]!="function"){j.push(e+"="+c(h[e],f))}}}}if(j.length){return j.join("&")}return""}});a.register("core.util.URL",function(b){return function(g,d){var f=b.core.obj.parseParam({isEncodeQuery:false,isEncodeHash:false},d||{});var e={};var i=b.core.str.parseURL(g);var c=b.core.json.queryToJson(i.query);var h=b.core.json.queryToJson(i.hash);e.setParam=function(j,k){c[j]=k;return this};e.getParam=function(j){return c[j]};e.setParams=function(k){for(var j in k){e.setParam(j,k[j])}return this};e.setHash=function(j,k){h[j]=k;return this};e.getHash=function(j){return h[j]};e.valueOf=e.toString=function(){var j=[];var k=b.core.json.jsonToQuery(c,f.isEncodeQuery);var l=b.core.json.jsonToQuery(h,f.isEncodeQuery);if(i.scheme!=""){j.push(i.scheme+":");j.push(i.slash)}if(i.host!=""){j.push(i.host);if(i.port!=""){j.push(":");j.push(i.port)}}j.push("/");j.push(i.path);if(k!=""){j.push("?"+k)}if(l!=""){j.push("#"+l)}return j.join("")};return e}});a.register("core.io.scriptLoader",function(c){var d={};var b={url:"",charset:"UTF-8",timeout:30*1000,args:{},onComplete:c.core.func.empty,onTimeout:c.core.func.empty,isEncode:false,uniqueID:null};return function(i){var g,e;var f=c.core.obj.parseParam(b,i);if(f.url==""){throw"scriptLoader: url is null"}var h=f.uniqueID||c.core.util.getUniqueKey();g=d[h];if(g!=null&&c.IE!=true){c.core.dom.removeNode(g);g=null}if(g==null){g=d[h]=c.C("script")}g.charset=f.charset;g.id="scriptRequest_script_"+h;g.type="text/javascript";if(f.onComplete!=null){if(c.IE){g.onreadystatechange=function(){if(g.readyState.toLowerCase()=="loaded"||g.readyState.toLowerCase()=="complete"){try{clearTimeout(e);document.getElementsByTagName("head")[0].removeChild(g);g.onreadystatechange=null}catch(j){}f.onComplete()}}}else{g.onload=function(){try{clearTimeout(e);c.core.dom.removeNode(g)}catch(j){}f.onComplete()}}}g.src=c.core.util.URL(f.url,{isEncodeQuery:f.isEncode}).setParams(f.args).toString();document.getElementsByTagName("head")[0].appendChild(g);if(f.timeout>0){e=setTimeout(function(){try{document.getElementsByTagName("head")[0].removeChild(g)}catch(j){}f.onTimeout()},f.timeout)}return g}});a.register("core.io.jsonp",function(b){return function(g){var e=b.core.obj.parseParam({url:"",charset:"UTF-8",timeout:30*1000,args:{},onComplete:null,onTimeout:null,responseName:null,isEncode:false,varkey:"callback"},g);var h=-1;var f=e.responseName||("STK_"+b.core.util.getUniqueKey());e.args[e.varkey]=f;var c=e.onComplete;var d=e.onTimeout;window[f]=function(i){if(h!=2&&c!=null){h=1;c(i)}};e.onComplete=null;e.onTimeout=function(){if(h!=1&&d!=null){h=2;d()}};return b.core.io.scriptLoader(e)}});a.register("core.json.merge",function(d){var c=function(f){if(f===undefined){return true}if(f===null){return true}if(d.core.arr.inArray((typeof f),["number","string","function","boolean"])){return true}if(d.core.dom.isNode(f)){return true}return false};var b=function(h,l,m){if(c(m)){h[l]=m;return}if(d.core.arr.isArray(m)){if(!d.core.arr.isArray(h[l])){h[l]=[]}for(var j=0,f=m.length;j<f;j+=1){b(h[l],j,m[j])}return}if(typeof m==="object"){if(c(h[l])||d.core.arr.isArray(h[l])){h[l]={}}for(var g in m){b(h[l],g,m[g])}return}};var e=function(h,j,g){var i={};if(g){for(var f in h){b(i,f,h[f])}for(var f in j){b(i,f,j[f])}}else{for(var f in h){i[f]=h[f]}for(var f in j){i[f]=j[f]}}return i};return function(f,i,h){var g=d.core.obj.parseParam({isDeep:false},h);return e(f,i,g.isDeep)}});a.register("core.json.clone",function(b){function c(g){var e;if(g instanceof Array){e=[];var f=g.length;while(f--){e[f]=c(g[f])}return e}else{if(g instanceof Object){e={};for(var d in g){e[d]=c(g[d])}return e}else{return g}}}return c});a.register("core.obj.beget",function(c){var b=function(){};return function(d){b.prototype=d;return new b()}});a.register("core.str.encodeHTML",function(b){return function(c){if(typeof c!=="string"){throw"encodeHTML need a string as parameter"}return c.replace(/\&/g,"&amp;").replace(/"/g,"&quot;").replace(/\</g,"&lt;").replace(/\>/g,"&gt;").replace(/\'/g,"&#39;").replace(/\u00A0/g,"&nbsp;").replace(/(\u0020|\u000B|\u2028|\u2029|\f)/g,"&#32;")}});a.register("core.util.drag",function(d){var b=function(f){f.cancelBubble=true;return false};var c=function(f,e){f.clientX=e.clientX;f.clientY=e.clientY;f.pageX=e.clientX+d.core.util.scrollPos()["left"];f.pageY=e.clientY+d.core.util.scrollPos()["top"];return f};return function(f,n){if(!d.core.dom.isNode(f)){throw"core.util.drag need Element as first parameter"}var m=d.core.obj.parseParam({actRect:[],actObj:{}},n);var j={};var k=d.core.evt.custEvent.define(m.actObj,"dragStart");var g=d.core.evt.custEvent.define(m.actObj,"dragEnd");var h=d.core.evt.custEvent.define(m.actObj,"draging");var l=function(p){var o=c({},p);document.body.onselectstart=function(){return false};d.core.evt.addEvent(document,"mousemove",i);d.core.evt.addEvent(document,"mouseup",e);d.core.evt.addEvent(document,"click",b,true);if(p.preventDefault){p.preventDefault();p.stopPropagation()}d.core.evt.custEvent.fire(k,"dragStart",o);return false};var i=function(p){var o=c({},p);p.cancelBubble=true;d.core.evt.custEvent.fire(k,"draging",o)};var e=function(p){var o=c({},p);document.body.onselectstart=function(){return true};d.core.evt.removeEvent(document,"mousemove",i);d.core.evt.removeEvent(document,"mouseup",e);d.core.evt.removeEvent(document,"click",b,true);d.core.evt.custEvent.fire(k,"dragEnd",o)};d.core.evt.addEvent(f,"mousedown",l);j.destroy=function(){d.core.evt.removeEvent(f,"mousedown",l);m=null};j.getActObj=function(){return m.actObj};return j}});a.register("core.util.swf",function(d){function b(j,k){var f=d.core.obj.parseParam({id:"swf_"+parseInt(Math.random()*10000,10),width:1,height:1,attrs:{},paras:{},flashvars:{},html:""},k);if(j==null){throw"swf: [sURL] 未定义";return}var i;var h=[];var g=[];for(i in f.attrs){g.push(i+'="'+f.attrs[i]+'" ')}var e=[];for(i in f.flashvars){e.push(i+"="+f.flashvars[i])}f.paras.flashvars=e.join("&");if(d.IE){h.push('<object width="'+f.width+'" height="'+f.height+'" id="'+f.id+'" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" ');h.push(g.join(""));h.push('><param name="movie" value="'+j+'" />');for(i in f.paras){h.push('<param name="'+i+'" value="'+f.paras[i]+'" />')}h.push("</object>")}else{h.push('<embed width="'+f.width+'" height="'+f.height+'" id="'+f.id+'" src="'+j+'" type="application/x-shockwave-flash" ');h.push(g.join(""));for(i in f.paras){h.push(i+'="'+f.paras[i]+'" ')}h.push(" />")}f.html=h.join("");return f}var c={};c.create=function(f,h,i){var g=d.E(f);if(g==null){throw"swf: ["+f+"] 未找到";return}var e=b(h,i);g.innerHTML=e.html;return d.E(e.id)};c.html=function(f,g){var e=b(f,g);return e.html};c.check=function(){var f=-1;if(d.IE){try{var e=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");f=e.GetVariable("$version")}catch(g){}}else{if(navigator.plugins["Shockwave Flash"]){f=navigator.plugins["Shockwave Flash"]["description"]}}return f};return c});a.register("core.util.cookie",function(c){var b={set:function(h,k,j){var e=[];var i,g;var f=c.core.obj.parseParam({expire:null,path:"/",domain:null,secure:null,encode:true},j);if(f.encode==true){k=escape(k)}e.push(h+"="+k);if(f.path!=null){e.push("path="+f.path)}if(f.domain!=null){e.push("domain="+f.domain)}if(f.secure!=null){e.push(f.secure)}if(f.expire!=null){i=new Date();g=i.getTime()+f.expire*3600000;i.setTime(g);e.push("expires="+i.toGMTString())}document.cookie=e.join(";")},get:function(f){f=f.replace(/([\.\[\]\$])/g,"\\$1");var e=new RegExp(f+"=([^;]*)?;","i");var g=document.cookie+";";var d=g.match(e);if(d){return d[1]||""}else{return""}},remove:function(d,e){e=e||{};e.expire=-10;b.set(d,"",e)}};return b});a.register("core.util.language",function(b){return function(e,g){var f=[];for(var d=2,c=arguments.length;d<c;d+=1){f.push(arguments[d])}return e.replace(/#L\{((.*?)(?:[^\\]))\}/ig,function(){var i=arguments[1];var h;if(g&&g[i]!==undefined){h=g[i]}else{h=i}if(f.length){h=h.replace(/(\%s)/ig,function(){var j=f.shift();if(j!==undefined){return j}else{return arguments[0]}})}return h})}});a.register("core.util.listener",function(b){return(function(){var d={};var e=[];var c;var f=function(){if(e.length==0){return}clearTimeout(c);var g=e.splice(0,1)[0];try{g.func.apply(g.func,[].concat(g.data))}catch(h){}c=setTimeout(f,25)};return{register:function(g,i,h){d[g]=d[g]||{};d[g][i]=d[g][i]||[];d[g][i].push(h)},fire:function(j,l,m){var k;var h,g;if(d[j]&&d[j][l]&&d[j][l].length>0){k=d[j][l];k.data_cache=m;for(h=0,g=k.length;h<g;h++){e.push({channel:j,evt:l,func:k[h],data:m})}f()}},remove:function(j,l,k){if(d[j]){if(d[j][l]){for(var h=0,g=d[j][l].length;h<g;h++){if(d[j][l][h]===k){d[j][l].splice(h,1);break}}}}},list:function(){return d},cache:function(g,h){if(d[g]&&d[g][h]){return d[g][h].data_cache}}}})()});a.register("core.util.templet",function(b){return function(c,d){return c.replace(/#\{(.+?)\}/ig,function(){var h=arguments[1].replace(/\s/ig,"");var f=arguments[0];var j=h.split("||");for(var g=0,e=j.length;g<e;g+=1){if(/^default:.*$/.test(j[g])){f=j[g].replace(/^default:/,"");break}else{if(d[j[g]]!==undefined){f=d[j[g]];break}}}return f})}});a.register("core.util.winSize",function(b){return function(d){var c,e;var f;if(d){f=d.document}else{f=document}if(f.compatMode==="CSS1Compat"){c=f.documentElement.clientWidth;e=f.documentElement.clientHeight}else{if(self.innerHeight){if(d){f=d.self}else{f=self}c=f.innerWidth;e=f.innerHeight}else{if(f.documentElement&&f.documentElement.clientHeight){c=f.documentElement.clientWidth;e=f.documentElement.clientHeight}else{if(f.body){c=f.body.clientWidth;e=f.body.clientHeight}}}}return{width:c,height:e}}});a.register("core.util.pageSize",function(b){return function(e){var i;if(e){i=e.document}else{i=document}var j=(i.compatMode=="CSS1Compat"?i.documentElement:i.body);var h,d;var g,f;if(window.innerHeight&&window.scrollMaxY){h=j.scrollWidth;d=window.innerHeight+window.scrollMaxY}else{if(j.scrollHeight>j.offsetHeight){h=j.scrollWidth;d=j.scrollHeight}else{h=j.offsetWidth;d=j.offsetHeight}}var c=b.core.util.winSize(e);if(d<c.height){g=c.height}else{g=d}if(h<c.width){f=c.width}else{f=h}return{page:{width:f,height:g},win:{width:c.width,height:c.height}}}});(function(){var c=a.core;var d={arrCopy:c.arr.copy,arrClear:c.arr.clear,hasby:c.arr.hasby,unique:c.arr.unique,foreach:c.arr.foreach,isArray:c.arr.isArray,inArray:c.arr.inArray,arrIndexOf:c.arr.indexOf,findout:c.arr.findout,domNext:c.dom.next,domPrev:c.dom.prev,isNode:c.dom.isNode,addHTML:c.dom.addHTML,insertHTML:c.dom.insertHTML,setXY:c.dom.setXY,contains:c.dom.contains,position:c.dom.position,trimNode:c.dom.trimNode,insertAfter:c.dom.insertAfter,insertBefore:c.dom.insertBefore,removeNode:c.dom.removeNode,replaceNode:c.dom.replaceNode,Ready:c.dom.ready,setStyle:c.dom.setStyle,setStyles:c.dom.setStyles,getStyle:c.dom.getStyle,addClassName:c.dom.addClassName,hasClassName:c.dom.hasClassName,removeClassName:c.dom.removeClassName,builder:c.dom.builder,cascadeNode:c.dom.cascadeNode,selector:c.dom.selector,sizzle:c.dom.sizzle,addEvent:c.evt.addEvent,custEvent:c.evt.custEvent,removeEvent:c.evt.removeEvent,fireEvent:c.evt.fireEvent,fixEvent:c.evt.fixEvent,getEvent:c.evt.getEvent,stopEvent:c.evt.stopEvent,delegatedEvent:c.evt.delegatedEvent,preventDefault:c.evt.preventDefault,hotKey:c.evt.hotKey,memorize:c.func.memorize,bind:c.func.bind,getType:c.func.getType,methodBefore:c.func.methodBefore,timedChunk:c.func.timedChunk,funcEmpty:c.func.empty,ajax:c.io.ajax,jsonp:c.io.jsonp,ijax:c.io.ijax,scriptLoader:c.io.scriptLoader,require:c.io.require,jsonInclude:c.json.include,jsonCompare:c.json.compare,jsonClone:c.json.clone,jsonToQuery:c.json.jsonToQuery,queryToJson:c.json.queryToJson,jsonToStr:c.json.jsonToStr,strToJson:c.json.strToJson,objIsEmpty:c.obj.isEmpty,beget:c.obj.beget,cascade:c.obj.cascade,objSup:c.obj.sup,parseParam:c.obj.parseParam,bLength:c.str.bLength,dbcToSbc:c.str.dbcToSbc,leftB:c.str.leftB,trim:c.str.trim,encodeHTML:c.str.encodeHTML,decodeHTML:c.str.decodeHTML,parseURL:c.str.parseURL,parseHTML:c.str.parseHTML,queryString:c.str.queryString,htmlToJson:c.util.htmlToJson,cookie:c.util.cookie,drag:c.util.drag,timer:c.util.timer,jobsM:c.util.jobsM,listener:c.util.listener,winSize:c.util.winSize,pageSize:c.util.pageSize,templet:c.util.templet,queue:c.util.queue,stack:c.util.stack,swf:c.util.swf,URL:c.util.URL,scrollPos:c.util.scrollPos,scrollTo:c.util.scrollTo,getUniqueKey:c.util.getUniqueKey,storage:c.util.storage,pageletM:c.util.pageletM};for(var b in d){if(d[b]){a.regShort(b,d[b])}}})();a.register("kit.dom.cssText",function(c){var b=function(g,f){var d=(g+";"+f).replace(/(\s*(;)\s*)|(\s*(:)\s*)/g,"$2$4"),e;while(d&&(e=d.match(/(^|;)([\w\-]+:)([^;]*);(.*;)?\2/i))){d=d.replace(e[1]+e[2]+e[3],"")}return d};return function(e){e=e||"";var f=[],d={push:function(h,g){f.push(h+":"+g);return d},remove:function(h){for(var g=0;g<f.length;g++){if(f[g].indexOf(h+":")==0){f.splice(g,1)}}return d},getStyleList:function(){return f.slice()},getCss:function(){return b(e,f.join(";"))}};return d}});a.register("kit.dom.fix",function(e){var b=!(e.core.util.browser.IE6||(document.compatMode!=="CSS1Compat"&&a.IE)),c=/^(c)|(lt)|(lb)|(rt)|(rb)$/;function d(h){return e.core.dom.getStyle(h,"display")!="none"}function f(j){j=e.core.arr.isArray(j)?j:[0,0];for(var h=0;h<2;h++){if(typeof j[h]!="number"){j[h]=0}}return j}function g(k,s,n){if(!d(k)){return}var r="fixed",u,v,h,q,l=k.offsetWidth,m=k.offsetHeight,o=e.core.util.winSize(),p=0,t=0,i=e.kit.dom.cssText(k.style.cssText);if(!b){r="absolute";var j=e.core.util.scrollPos();p=u=j.top;t=v=j.left;switch(s){case"lt":u+=n[1];v+=n[0];break;case"lb":u+=o.height-m-n[1];v+=n[0];break;case"rt":u+=n[1];v+=o.width-l-n[0];break;case"rb":u+=o.height-m-n[1];v+=o.width-l-n[0];break;case"c":default:u+=(o.height-m)/2+n[1];v+=(o.width-l)/2+n[0]}h=q=""}else{u=q=n[1];v=h=n[0];switch(s){case"lt":q=h="";break;case"lb":u=h="";break;case"rt":v=q="";break;case"rb":u=v="";break;case"c":default:u=(o.height-m)/2+n[1];v=(o.width-l)/2+n[0];q=h=""}}if(s=="c"){if(u<p){u=p}if(v<t){v=t}}i.push("position",r).push("top",u+"px").push("left",v+"px").push("right",h+"px").push("bottom",q+"px");k.style.cssText=i.getCss()}return function(i,o,j){var k,p,l=true,h;if(e.core.dom.isNode(i)&&c.test(o)){var m={getNode:function(){return i},isFixed:function(){return l},setFixed:function(q){(l=!!q)&&g(i,k,p);return this},setAlign:function(q,r){if(c.test(q)){k=q;p=f(r);l&&g(i,k,p)}return this},destroy:function(){if(!b){e.core.evt.removeEvent(window,"scroll",n)}e.core.evt.removeEvent(window,"resize",n);e.core.evt.custEvent.undefine(h)}};h=e.core.evt.custEvent.define(m,"beforeFix");m.setAlign(o,j);function n(q){q=q||window.event;e.core.evt.custEvent.fire(h,"beforeFix",q.type);if(l&&(!b||k=="c")){g(i,k,p)}}if(!b){e.core.evt.addEvent(window,"scroll",n)}e.core.evt.addEvent(window,"resize",n);return m}}});a.register("kit.dom.builder",function(c){var b=null;return function(d){var e=null;if(typeof(d)=="string"){if(!b){b=c.C("div")}b.innerHTML=d;e=b.children[0];b.removeChild(e);b.innerHTML=""}else{e=d}var g={};var f=e.getElementsByTagName("*");if(f.length>0){c.foreach(f,function(j){if(c.isNode(j)){var i=j.getAttribute("node-type");if(i){if(!g[i]){g[i]=[]}g[i].push(j)}}})}var h={};h.box=e;h.list=g;return h}});a.register("kit.dom.parseDOM",function(b){return function(d){for(var c in d){if(d[c]&&(d[c].length==1)){d[c]=d[c][0]}}return d}});a.register("kit.obj.append",function(b){return function(g){for(var f=1,d=arguments.length;f<d;f++){var c=arguments[f]||{};for(var e in c){g[e]=c[e]}}return g}});a.register("kit.dom.loadStyle",function(e){var d;var c=e.funcEmpty;var b=e.core.util.browser;return function(g,n){var m,h,j=false,l=false;var k=e.parseParam({id:e.getUniqueKey(),timeout:30*1000,styleCheck:null,onLoad:c,onTimeout:c,props:{charset:"utf-8",rel:"stylesheet",media:"screen",type:"text/css"}},n);m=e.C("link");e.foreach(k.props,function(p,o){m[o]=p});m.id=k.id;m.href=g;var f=function(){clearInterval(h);if(!l&&!j){if(e.getType(k.onLoad)==="function"){setTimeout(k.onLoad,100)}}j=true};if(b.IE){m.onload=f}else{if(e.getType(k.styleCheck)==="function"){h=setInterval(function(){if(k.styleCheck()){f()}},10)}else{var i=document.createElement("img");i.onerror=f;i.src=g}}if(k.timeout&&k.onTimeout){setTimeout(function(){clearInterval(h);if(!j&&e.getType(k.onTimeout)==="function"){l=true;k.onTimeout()}},k.timeout)}if(!d){d=document.getElementsByTagName("head")[0]}d.appendChild(m)}});a.register("kit.util.makeReady",function(b){return function(d){var e=b.parseParam({timeout:30*1000,condition:b.funcEmpty,ready:b.funcEmpty},d);var c,f;return{reset:function(){if(c){c.length=0;c=null}if(f){clearTimeout(f);f=null}},exec:function(g){var h=this;if(b.getType(g)==="function"){if(e.condition()){g()}else{if(!c){c=[];c.push(g);if(!f){f=setTimeout(h.reset,e.timeout)}e.ready(function(){clearTimeout(f);f=null;while(b.getType(c)==="array"&&c.length>0){c.shift()()}})}else{c.push(g)}}}},destroy:function(){this.reset()}}}});a.register("kit.dom.appendStyle",function(b){return function(f,c){var d=b.parseParam({autoAppend:true,target:null,type:"text/css"},c);var e;f=f||"";f=f.toString();if(b.isNode(d.target)&&d.target.tagName.toLowerCase()==="style"){e=d.target}else{e=document.createElement("style");e.setAttribute("type",d.type)}if(e.styleSheet){e.styleSheet.cssText=e.innerHTML+f}else{e.appendChild(document.createTextNode(f))}if(d.autoAppend){document.getElementsByTagName("head")[0].appendChild(e)}return e}});a.register("module.mask",function(f){var m,d=[],i,n,e;var h=f.core.dom.setStyle;var k=f.core.dom.getStyle;var l=f.core.evt.custEvent;var c={},b;function j(o){m=f.C("div");if(f.core.util.browser.IE6&&o&&o.useIframeInIE6){m.innerHTML='<iframe style="position:absolute;z-index:-1;width:100%;height:100%;filter:mask();"></iframe>'}document.body.appendChild(m);n=true;i=f.kit.dom.fix(m,"lt");var p=function(){var q=f.core.util.winSize();m.style.cssText=f.kit.dom.cssText(m.style.cssText).push("width",q.width+"px").push("height",q.height+"px").getCss()};e=l.add(i,"beforeFix",p);p()}var g={getNode:function(){return m},show:function(p,o){if(n){p=f.core.obj.parseParam({useIframeInIE6:true,opacity:0.1,background:"#000000"},p);m.style.background=p.background;h(m,"opacity",p.opacity);m.style.display="block";i.setAlign("lt");o&&o()}else{f.Ready(function(){j(p);g.show(p,o)})}return g},hide:function(q){if(m&&q){if(b!=q){delete c[f.core.dom.uniqueID(q)]}else{var r=f.core.dom.prev(m);if(b){delete c[f.core.dom.uniqueID(b)];b=undefined}var p=false;for(var o=0;r&&o<3;o++){if(c[f.core.dom.uniqueID(r)]){p=true;break}r=f.core.dom.prev(r)}if(p){g.showUnderNode(r)}else{m.style.display="none"}r=undefined}}q=undefined;return g},showUnderNode:function(p,o){if(f.isNode(p)){(b=p);c[f.core.dom.uniqueID(p)]=1;g.show(o,function(){document.body.appendChild(m);document.body.appendChild(p);h(m,"zIndex",k(p,"zIndex"))})}return g},destroy:function(){l.remove(e);m.style.display="none";b=undefined;c={}}};return g});a.register("kit.num.limit",function(b){return function(d,e,c){return Math.min(c,Math.max(d,e))}});a.register("kit.dom.getCoordinates",function(b){return function(c){var d=b.position(c);return{left:d.l,top:d.t,right:d.l+c.offsetWidth,bottom:d.t+c.offsetHeight}}});a.register("kit.dom.offsetParent",function(c){var b=/^(?:body|html)$/i;return function(e){var d;if(c.isNode(e)){d=e.offsetParent||document.body;while(d&&c.getStyle(d,"position")==="static"){if(b.test(d.nodeName)){d=document.body;break}d=d.offsetParent}}return d||document.body}});a.register("module.draggable",function(g){var c=g.core.util.browser,h=g.kit.num.limit,f=g.kit.dom.offsetParent,e=g.kit.dom.getCoordinates;var d=function(j){var i=f(j);if(g.isNode(j)&&g.isNode(i)&&i.tagName&&i.tagName.toLowerCase()==="body"&&g.getStyle(j,"position")==="fixed"){return true}else{return false}};var b={init:function(){g.custEvent.define(this,"beforeStart");g.custEvent.define(this,"dragStart");g.custEvent.define(this,"draging");g.custEvent.define(this,"dragEnd");this.build();this.setCustEvents("add");return this},setOptions:function(i){this.conf=g.parseParam({enable:true,exclude:[],fixScroll:true,node:null,dragarea:"page",handle:null},i)},build:function(){var j=this,i=this.conf;this.drag=g.drag(i.handle||i.node);this.bound={fixScrollDrag:function(){j.fixScrollDrag()}}},setDomEvents:function(k){var i=this.conf,j=this.bound,l=k==="add"?"add":"remove";if(i.fixScroll){g[l+"Event"](window,"scroll",j.fixScrollDrag)}},setCustEvents:function(k){var l=this,i=this.conf,m=k==="add"?"add":"remove",j=this.drag.getActObj();g.foreach(["dragStart","dragMove","dragEnd"],function(n){g.custEvent[m](j,(n==="dragMove"?"draging":n),function(p,o){l.data=o;if(i.enable){l[n](l.formatData(o))}})})},enable:function(){this.conf.enable=true},disable:function(){this.conf.enable=false},fixScrollDrag:function(){if(this.draging&&this.data&&this.scrollPos){var j=g.scrollPos();var i=this.data;i.pageX=i.pageX+j.left-this.scrollPos.left;i.pageY=i.pageY+j.top-this.scrollPos.top;this.dragMove(this.formatData(this.data))}},updateInfo:function(){this.winsize=g.winSize();this.pagesize=g.pageSize()},formatData:function(i){i.x=i.pageX;i.y=i.pageY;return i},limit:function(n){var j=this.conf,l,k,i,o,m=j.node;if(j.dragarea){l={};if(g.isNode(j.dragarea)){l=e(j.dragarea)}else{if(j.dragarea==="page"){k=this.pagesize;l={left:0,top:0,right:k.page.width,bottom:k.page.height}}else{if(j.dragarea==="window"){i=this.winsize;o=g.scrollPos();l={left:o.left,top:o.top,right:i.width+o.left,bottom:i.height+o.top}}}}n.left=Math.max(h(n.left,l.left,l.right-m.offsetWidth),l.left);n.top=Math.max(h(n.top,l.top,l.bottom-m.offsetHeight),l.top)}return n},exclude:function(l,i){var j=this.conf,k=true;if(i){k=g.inArray(i.target,j.exclude)}return k},getOffsetPos:function(n){var i=this.conf;var k={};n=g.parseParam({x:0,y:0},n);var j=f(i.node);var l=g.position(j);l=g.parseParam({l:0,t:0},l);this.scrollPos=g.scrollPos();var m={left:0,top:0};if(d(i.node)){m=g.parseParam(m,this.scrollPos)}k.x=n.x-l.l-m.left;k.y=n.y-l.t-m.top;return k},dragStart:function(l){var i=g.fixEvent(),j=this.conf,m=j.node;g.custEvent.fire(this,"beforeStart");if(this.exclude(l,i)){g.stopEvent();return}this.draging=true;this.startPos=g.position(j.node);if(g.getStyle(m,"position")==="static"){g.setStyle(m,"position","absolute")}var k=this.getOffsetPos({x:this.startPos.l,y:this.startPos.t});g.setStyle(m,"margin","0");g.setStyle(m,"left",k.x+"px");g.setStyle(m,"top",k.y+"px");this.startData=l;this.updateInfo();this.setDomEvents("add");g.custEvent.fire(this,"dragStart",[l])},dragMove:function(m){var j=this.conf,i=this.startPos,k=this.startData,o={},n=j.node;if(!this.draging){return}o.left=i.l+m.x-k.x;o.top=i.t+m.y-k.y;o=this.limit(o);var l=this.getOffsetPos({x:o.left,y:o.top});g.setStyle(n,"left",l.x+"px");g.setStyle(n,"top",l.y+"px");g.custEvent.fire(this,"draging",[m])},dragEnd:function(i){if(!this.draging){return}this.draging=false;this.setDomEvents("remove");g.custEvent.fire(this,"dragEnd",[i])}};return function(j,i){var k=g.beget(b);i.node=j;k.setOptions(i);return k}});a.register("common.listener",function(c){var d={};var b={};b.define=function(f,g){if(d[f]!=null){throw"common.listener.define: 频道已被占用"}d[f]=g;var e={};e.register=function(i,h){if(d[f]==null){throw"common.listener.define: 频道未定义"}c.core.util.listener.register(f,i,h)};e.fire=function(h,i){if(d[f]==null){throw"commonlistener.define: 频道未定义"}c.core.util.listener.fire(f,h,i)};e.remove=function(i,h){c.core.util.listener.remove(f,i,h)};return e};return b});a.register("common.channel.sso",function(b){return b.common.listener.define("common.channel.sso",["layer_ready","layer_show","layer_hide","validate_failure","play_door_voice","login","login_complete","login_success","login_failure","login_timeout","logout","logout_complete","logout_success","logout_failure","logout_timeout","verify","need_verify"])});a.register("common.util.sso",function(d){var c=d.core.json.merge,b=d.common.channel.sso;return function(f){var h={},e=null;f=f||{};var g=c({name:"sinaSSOController",savestate:0,vsnf:0,hold_login_state:false,cookie_timeout:0,timeout:10*1000},f);h.para={};h.init=function(){if(h.inited){return}h.set_options();e=window[g.name];if(!e){e=new window.SSOController();e.name=g.name;window[g.name]=e}h.bindListener();h.inited=true};h.set_options=function(i){i=i||{};g=c(g,i)};h.set_extra=function(i){i=i||{};if(!e.loginExtraQuery){e.loginExtraQuery={}}if(g.cookie_timeout){e.loginExtraQuery.ct=g.cookie_timeout}e.loginExtraQuery.vsnf=g.vsnf;if(g.hold_login_state){e.loginExtraQuery.s=1}e.loginExtraQuery=c(e.loginExtraQuery,i)};h.login=function(j,l,k,i){var m;k=k||{};h.para.userid=j;h.para.password=l;if(d.getType(k.savestate)==="undefined"){m=g.savestate||0}else{m=k.savestate||0}h.para.savestate=m;e.loginExtraQuery={};h.set_extra(i);h.requestLogin()};h.logout=function(){e.logout()};h.verify=function(j,k,i){i=i||{};if(j=="vsn"){h.set_extra({vsnval:k})}else{if(j=="code"){h.set_extra({door:k})}}if(typeof(i.savestate)!="undefined"){h.para.savestate=i.savestate}h.requestLogin()};h.requestLogin=function(){if(h.logining){return}h.logining=true;h.loginTimer=setTimeout(function(){if(!h.logining){return}clearTimeout(h.loginTimer);delete h.loginTimer;h.logining=false;b.fire("login_timeout")},g.timeout);e.login(h.para.userid,h.para.password,h.para.savestate)};h.login_callback=function(j){if(!h.logining){return}clearTimeout(h.loginTimer);delete h.loginTimer;h.logining=false;b.fire("login_complete",[j]);if(j.result){b.fire("login_success",[j])}else{var i={};i.code=j.errno;i.reason=j.reason;var k=d.inArray(i.code,["5024","5025","4049","2070"]);if(k){b.fire("need_verify",[i])}else{b.fire("login_failure",[i])}}};h.logout_callback=function(i){b.fire("logout_complete",[i]);if(i.result){b.fire("logout_success",[i])}else{b.fire("logout_failure",[i])}};h.bindListener=function(){e.customLoginCallBack=h.login_callback;e.customLogoutCallBack=h.logout_callback;b.register("login",h.login);b.register("verify",h.verify);b.register("logout",h.logout)};return h}});a.register("kit.extra.template",function(c){var b=function(d,e){return d.replace(/#\{(.+?)\}/ig,function(){var j=arguments[1];var g=arguments[0];var k=j.split("||");for(var h=0,f=k.length;h<f;h+=1){if(/^default:.*$/.test(k[h])){g=k[h].replace(/^default:/,"");break}else{if(e[k[h]]!==undefined){g=e[k[h]];break}}}return g})};return function(d,e){e=e||c.$LANG||{};var f=b(d,e);return f}});a.register("kit.evt.input_bindchange",function(c){var b=c.core.util.browser;return function(g,f,e){f=(f=="add")?"add":"remove";var h=f+"Event";if(b.IE){var d=parseInt(b.Version,10);if(d==5){c[h](g,"keydown",e);c[h](g,"cut",e);c[h](g,"input",e)}else{if(d>5){c[h](g,"input",e)}else{c[h](g,"propertychange",e)}}}else{c[h](g,"input",e)}}});a.register("kit.util.buffer_pool",function(b){return function(d){var g={};var f=b.parseParam({delay:50},d);var c=null;g.trigger_final=function(){if(c){clearTimeout(c);c=null}c=setTimeout(function(){c=null;g.feedback()},f.delay)};var h=null;var e=false;g.trigger_regular=function(){e=true;if(!h){h=setInterval(function(){g.feedback();if(!e){clearInterval(h);h=null}e=false},f.delay)}};g.feedback=function(){};return g}});a.register("kit.dom.placeholder",function(d){var c=d.core.json.merge;var b;return function(h,e){var g={};var f=d.parseParam({},e);var i={opacity:0.5};g.supportPlaceholder=function(){if(!b){b=d.C("input")}return"placeholder" in b};g.compute_offset=function(){var j={};d.foreach(["marginTop","paddingTop","borderTopWidth","marginLeft","paddingLeft","borderLeftWidth"],function(k){j[k]=d.getStyle(h,k);if(j[k]=="auto"){j[k]="1px"}j[k]=parseInt(j[k],10)||0});j.x=j.marginLeft+j.paddingLeft+j.borderLeftWidth;j.y=j.marginTop+j.paddingTop+j.borderTopWidth+(d.core.util.browser.IE6?1:0);return j};g.getStyles=function(){var j={};d.foreach(["fontSize","lineHeight"],function(k){j[k]=d.getStyle(h,k)});j.position="absolute";return j};g.focus=function(){g.hide();setTimeout(function(){h.focus()})};g.hide=function(){if(g.label){d.setStyle(g.label,"display","none")}};g.show=function(){if(g.label&&h&&!h.value){d.setStyle(g.label,"display","")}};g.check=function(){if(!h.value){g.show()}else{g.hide()}};g.build_placeholder=function(l){if(!g.label){g.label=d.C("span");g.hide();d.insertBefore(g.label,h);g.bindDomEvents()}g.label.innerHTML=l;var j=g.getStyles();var k=g.compute_offset();j.marginLeft=k.x+"px";j.marginTop=k.y+"px";j=c(j,i);d.foreach(j,function(n,m){d.setStyle(g.label,m,n)})};g.checkInput=function(){if(h&&h.value){g.hide()}};g.bindDomEvents=function(){d.addEvent(h,"input",g.checkInput);d.addEvent(h,"propertychange",g.checkInput);d.addEvent(h,"focus",g.hide);d.addEvent(h,"blur",g.check);d.addEvent(g.label,"mousedown",g.focus)};g.destroy=function(){d.removeEvent(h,"focus",g.hide);d.removeEvent(g.label,"mousedown",g.focus);d.removeEvent(h,"blur",g.check);if(g.label&&g.label.parentNode){g.label.parentNode.removeChild(g.label)}g.label=null};g.set=function(k,j){if(!h){return}j=j||{};i=c({color:"#888"},j);if(!k){k=h.getAttribute("placeholder")||""}if(g.supportPlaceholder()){h.setAttribute("placeholder",k)}else{g.build_placeholder(k);g.check()}return g};g.node=h;g.conf=f;g.conf_style=i;return g}});a.register("common.util.door",function(e){var d=e.core.json.merge,c=e.common.channel.sso;var b=function(k){var g={};var j=k.split("&");var f=[];for(var h=0;h<j.length;h++){f=j[h].split("=");g[f[0]]=f[1]}return g};return function(g){var i={},h={},f=null;i.argsCheck=function(){h=e.parseParam({ssoName:"sinaSSOController",usesso:false,address:"",img:null,input:null,tip:null,button:null,img_extra:{},voiceEnable:true,voice_swf:"http://account.weibo.com/sguide/code_play.swf",voice_service:"http://login.sina.com.cn/cgi/voicepin.php",voice_para:{p:"",r:""},voice_button:null,autofocus:false},g)};i.init=function(){i.argsCheck();i.checkSSO();i.setEvents("add");setTimeout(i.change,1000)};i.checkSSO=function(){if(!f){f=window[h.ssoName]}if(f&&f.getServerTime){f.getServerTime()}};i.change=function(){var k="/aj3/pincode/pin1.php",m=e.cookie.get("wvr"),n=parseFloat(m,10);if(h.address){k=h.address}else{if(!isNaN(n)&&n&&n<3.6){k="/pincode/pin1.php"}}if(h.tip){h.tip.innerHTML=""}if(h.input){h.input.value=""}var l="";var j=h.img_extra||{};if(h.usesso&&f&&f.getPinCodeUrl){l=f.getPinCodeUrl()}else{j.r=(new Date()-0);l=k+"?"+e.jsonToQuery(j)}if(h.img){e.setStyle(h.img,"visibility","hidden");h.img.src=l}if(h.voiceEnable&&h.voice_button){var o=i.getPinCode(l);i.setVoiceCode(o)}};i.getPinCode=function(l){var k=l.split("?");var m=k[1];var j={};if(!m){return null}else{return b(m)}};i.setVoiceCode=function(o){if(!h.voiceEnable){return}if(!o||!o.p){return}if(i.voiceSwf&&i.swfcont){i.swfcont.innerHTML=""}if(!i.swfcont){i.swfcont=e.C("span");e.setStyle(i.swfcont,"position","absolute");e.setStyle(i.swfcont,"zIndex","-100");e.setStyle(i.swfcont,"marginTop","-1px");if(h.input){if(e.core.util.browser.IE6){document.body.appendChild(i.swfcont)}else{h.input.parentNode.appendChild(i.swfcont)}}}var m=e.getUniqueKey();var l="swf_"+m;var j=d({},h.voice_para);j=e.parseParam(j,o);var n=[];e.foreach(j,function(q,p){n.push(p+"="+q)});var k={};k.url=h.voice_service+"?"+n.join("&");i.voiceSwf=e.swf.create(i.swfcont,h.voice_swf,{id:l,paras:{quality:"high",allowScriptAccess:"always"},flashvars:k})};i.playVoice=function(j){if(j){e.preventDefault(j)}if(i.voiceSwf){i.voiceSwf.SetVariable("isPlay","1")}};i.stopVoice=function(){if(i.voiceSwf&&i.swfcont){i.swfcont.innerHTML=""}};i.bound={change:function(){e.preventDefault();i.change();if(h.input&&h.autofocus){h.input.focus()}},doorImgLoad:function(){e.setStyle(h.img,"visibility","visible")}};i.setEvents=function(j){var k=j==="add"?"addEvent":"removeEvent";e[k](h.button,"click",i.bound.change);e[k](h.img,"click",i.bound.change);e[k](h.img,"load",i.bound.doorImgLoad);e[k](h.voice_button,"click",i.playVoice);k=j==="add"?"register":"remove";c[k]("play_door_voice",i.playVoice)};i.destroy=function(){i.setEvents("remove")};i.conf=h;return i}});a.register("comp.login.outlogin",function(e){var i=e.core.json.merge,f=e.kit.extra.template,k=e.kit.dom.builder,j=e.kit.dom.parseDOM,b=e.kit.evt.input_bindchange,c=e.kit.util.buffer_pool,h=e.kit.dom.placeholder,d=e.common.util.door,g=e.common.channel.sso;return function(m){var o={},l={},n={ssoName:"sinaSSOController",forgot_vsn_url:"",forgot_password_url:"",register_url:"https://login.sina.com.cn/signup/signup.php?entry=#{entry||default:sso}",entry:"",door_address:"http://login.sina.com.cn/cgi/pin.php",voiceEnable:true,voice_swf:"http://i.sso.sina.com.cn/images/code_play.swf",voice_service:"http://login.sina.com.cn/cgi/voicepin.php",savestate:30,relative_node:null,tip_capslockon:"",setTipDelay:100,closeAutoCompleteDelay:200,updateDelay:200};o.prev_value="";o.disabled=false;o.getSSO=function(){return window[n.ssoName]};o.setOptions=function(q){q=q||{};n=e.parseParam(n,q);o.conf=n};o.setTip=function(r,q){r=r||"";if(r+""==="undefined"){r=""}if(l.tip){l.tip.innerHTML=r}};o.hideTip=function(){if(l.tip){l.tip.innerHTML=""}};o.lockForm=function(q){q=!!q;o.disabled=q;e.foreach(["loginname","password","door","vsn"],function(s){var r=l[s];r.readOnly=q})};o.getRemember=function(){var q=l.loginname.value;var s=o.getSSO();if(!q&&s&&e.getType(s.getLoginInfo)==="function"){var r=s.getLoginInfo();if(r&&r.ln){l.loginname.value=r.ln}}if(o.placeholder_loginname){o.placeholder_loginname.check()}o.checkFace()};o.showClearButton=function(){if(l.clear){if(l.loginname.value){e.setStyle(l.clear,"display","")}else{e.setStyle(l.clear,"display","none")}}};o.hideClearButton=function(){if(l.clear){l.clear.style.display="none"}};o.clearRemember=function(){};o.reset=function(){o.lockForm(false);l.loginname.value="";l.password.value="";l.door.value="";l.vsn.value="";o.switchFace("password");o.hideTip();if(o.placeholder_loginname){o.placeholder_loginname.check()}if(o.placeholder_password){o.placeholder_password.check()}if(o.placeholder_vsn){o.placeholder_vsn.check()}o.hideClearButton()};o.getData=function(){var q={};e.foreach(["loginname","door","vsn","password"],function(t){var s=l[t];var r=e.trim(s.value);if(s.value!==r&&t!=="password"){s.value=r;s.blur()}q[t]=s.value});return q};o.validate=function(u,t){var q=true;var s="";var r=null;e.foreach({loginname:"E010001",password:"E010002",door:"E010003",vsn:"E010004"},function(x,y){var v=y==="loginname"||y==="password"||t===y;var w=l[y];if(v&&w&&!u[y]){r=w;s=f("#{"+x+"}");q=false}return q});if(!q){if(r){r.focus()}setTimeout(function(){o.setTip(s,r);g.fire("validate_failure")},n.setTipDelay)}return q};o.verify=function(r){r=r||{reason:""};var s=f("#{"+r.code+"||default:"+r.reason+"}");var q=null;if(r.code=="4049"||r.code=="2070"){o.switchFace("door");if(o.door&&r.code=="2070"){o.door.change()}q=l.door}else{o.switchFace("vsn");q=l.vsn}if(q){q.focus()}setTimeout(function(){o.setTip(s,q);if(r.code=="2070"||r.code=="5025"){g.fire("validate_failure")}},n.setTipDelay)};o.submit=function(){if(o.disabled){return}o.hideTip();var t=o.getData();var s=o.getFaceState();if(o.validate(t,s)){o.lockForm(true);var r={savestate:0};if(l.remember&&l.remember.checked){r.savestate=n.savestate}var q=e.jsonClone(n.extra)||{};if(s==="door"){q.door=t.door}else{if(s==="vsn"){q.vsnval=t.vsn}}g.fire("login",[t.loginname,t.password,r,q])}};o.getFaceState=function(){if(l.door_box.style.display!="none"){return"door"}else{if(l.vsn_box.style.display!="none"){return"vsn"}else{return"password"}}};o.switchFace=function(q){q=q||"password";if(q==="door"&&o.door){if(e.getStyle(l.door_box,"display")==="none"){o.door.change()}}e.foreach(["door","vsn"],function(r){var s=l[r+"_box"];if(r===q){e.setStyle(s,"display","block")}else{e.setStyle(s,"display","none")}});if(l.forgot_vsn&&l.forgot_password){if(q==="vsn"){e.setStyle(l.forgot_vsn,"display","");e.setStyle(l.forgot_password,"display","none")}else{e.setStyle(l.forgot_vsn,"display","none");e.setStyle(l.forgot_password,"display","")}}};var p={};o.checkFace=function(){var r=window[n.ssoName];var q=e.trim(l.loginname.value);if(!q){return}if(e.getType(p[q])!=="undefined"){o.checkPin(p[q])}else{if(!r){return}r.prelogin({checkpin:1,username:q},function(s){if(s){if(s.showpin){o.checkPin(s.showpin)}p[q]=s.showpin}})}};o.checkPin=function(q){q=q.toString();if(q==="1"){o.switchFace("door")}else{if(q==="2"){o.switchFace("vsn")}}};o.update=function(){var q=l.loginname.value;if(q!=o.prev_value){o.switchFace("password");if(p[e.trim(q)]){o.checkFace()}}o.prev_value=q;o.showClearButton()};o.delayUpdate=function(){if(!o.buffer){o.buffer=c({delay:n.updateDelay});o.buffer.feedback=o.update}o.buffer.trigger_regular()};o.parseDom=function(){var q=m;if(q){l=j(k(q).list);o.nodes=l;e.foreach(["root","tip","loginname","password_box","password","door_box","door","door_img","vsn_box","vsn"],function(r){if(!l[r]){throw ("Can't find necessary node : "+r+" !")}});e.foreach(["submit","clear","door_voice","door_change","forgot_password","forgot_vsn","register_button","remember","remember_label"],function(r){if(!l[r]){o.log("Can't find node : "+r+" !")}});l.relative=n.relative_node||l.root}else{o.log("Can't find login form : "+m.id||m.getAttribute("noe-type"))}};o.domEvents={check_keydown:function(q){q=e.fixEvent(q);var t=o.getFaceState();var s=null;var r=q.target.getAttribute("node-type");if(q.keyCode==13){if(!l.loginname.value){s=l.loginname}else{if(!l.password.value){s=l.password}else{if(!l[t].value){s=l[t]}else{o.submit()}}}}if(s){setTimeout(function(){s.focus()},10)}},clear:function(){e.preventDefault();o.reset();o.hideClearButton();o.clearRemember();l.loginname.focus();l.loginname.blur()},submit:function(){e.preventDefault();o.submit()}};o.setDomEvents=function(q){q=q=="add"?"add":"remove";var r=q+"Event";b(l.loginname,q,o.delayUpdate);e[r](l.submit,"click",o.domEvents.submit);e[r](l.clear,"click",o.domEvents.clear);e[r](l.loginname,"blur",o.showClearButton);e[r](l.loginname,"blur",o.checkFace);e[r](l.loginname,"focus",o.hideTip);e[r](l.password,"focus",o.hideTip);e[r](l.door,"focus",o.hideTip);e[r](l.vsn,"focus",o.hideTip);e[r](l.loginname,"keydown",o.domEvents.check_keydown);e[r](l.password,"keydown",o.domEvents.check_keydown);e[r](l.door,"keydown",o.domEvents.check_keydown);e[r](l.vsn,"keydown",o.domEvents.check_keydown)};o.listenerEvents={loginComplete:function(q){},loginSuccess:function(q){o.hideTip()},loginFailure:function(q){o.lockForm(false);q=q||{reason:""};var s=f("#{"+q.code+"||default:"+q.reason+"}");var r=o.getFaceState();s=f(s,{loginname:encodeURIComponent(l.loginname.value)});if(o.door&&r==="door"){o.door.change()}o.setTip(s)},verify:function(q){o.lockForm(false);o.verify(q)},logoutSuccess:function(q){o.reset()},stopDoorVoice:function(){if(o.door){o.door.stopVoice()}},onLoginTimeout:function(){o.lockForm(false);var q=f("#{E010005}");o.setTip(q)}};o.setListener=function(q){var r=q=="register"?"register":"remove";g[r]("login_complete",o.listenerEvents.loginComplete);g[r]("login_success",o.listenerEvents.loginSuccess);g[r]("login_failure",o.listenerEvents.loginFailure);g[r]("logout_success",o.listenerEvents.logoutSuccess);g[r]("need_verify",o.listenerEvents.verify);g[r]("layer_hide",o.listenerEvents.stopDoorVoice);g[r]("login_timeout",o.listenerEvents.onLoginTimeout)};o.initPlugin=function(){o.switchFace("password");o.lockForm(false);setTimeout(function(){o.getRemember();o.showClearButton();o.placeholder_loginname=h(l.loginname).set();o.placeholder_password=h(l.password).set();o.placeholder_vsn=h(l.vsn).set();l.loginname.blur();l.password.blur()},n.closeAutoCompleteDelay);o.door=d({ssoName:n.ssoName,address:n.door_address,usesso:true,autofocus:true,img:l.door_img,input:l.door,voiceEnable:n.voiceEnable,voice_button:l.door_voice,voice_swf:n.voice_swf,voice_service:n.voice_service,button:l.door_change});o.door.init();if(n.entry){var q=f(n.register_url,{entry:n.entry});if(e.getType(l.register_button)==="array"){e.foreach(l.register_button,function(r){r.href=q})}}if(l.forgot_password&&n.forgot_password_url){l.forgot_password.href=n.forgot_password_url}if(l.forgot_vsn&&n.forgot_vsn_url){l.forgot_vsn.href=n.forgot_vsn_url}};o.log=function(q){if(q){e.log("STK.comp.login.plugin : "+q)}};o.destroy=function(){o.setListener("remove");o.setDomEvents("remove");o.placeholder_loginname.destroy();o.placeholder_password.destroy();o.placeholder_vsn.destroy();if(o.door&&o.door.destroy){o.door.destroy()}};o.init=function(){o.parseDom();o.setDomEvents("add");o.setListener("register");o.initPlugin()};o.nodes=l;o.conf=n;return o}});a.register("comp.defaultStyle",function(c){var b=[".outlogin_layerbox_bylx,",".outlogin_layerbox_bylx p,",".outlogin_layerbox_bylx div,",".outlogin_layerbox_bylx li,",'.outlogin_layerbox_bylx input{font: 12px/1.125 "Simsun", "Arial Narrow", "HELVETICA"!important;}',".outlogin_layerbox_bylx{width:510px!important;position:absolute;border-width:1px!important;border-style:solid!important;text-align:left!important;}",".outlogin_layerbox_bylx .cur_move{position:relative!important;width:510px!important;height:17px!important;cursor:move;left:0!important;clear:both!important;}",'.outlogin_layerbox_bylx a.layerbox_close{position:absolute!important;right:8px!important;top:8px!important;width:12px!important;height:11px!important;padding:5px!important;font:700 12px "Simsun"!important;text-decoration:none!important;overflow:hidden!important;}','.outlogin_layerbox_bylx .close_loginname{position:absolute!important;width:11px!important;height:11px!important;padding:5px!important;left:180px!important;top:4px!important;font:700 12px "Simsun"!important;text-decoration:none!important;overflow:hidden!important;}',".outlogin_layerbox_bylx a.layerbox_close:hover{text-decoration:none!important;}",".outlogin_layerbox_bylx .layerbox_left{width:269px!important;display:inline!important;float:left!important;margin-top:-17px!important;padding:17px 0 17px 30px!important;border-right-width:1px!important;border-right-style:solid!important;}",".outlogin_layerbox_bylx .layerbox_left .titletips{padding:8px 0 35px!important;}",".outlogin_layerbox_bylx .layerbox_left ul.loginformlist{list-style:none!important;padding:0!important;margin:0!important;}",".outlogin_layerbox_bylx .layerbox_left ul.loginformlist li{width:260px!important; clear:both!important; padding-bottom:12px!important;}",".outlogin_layerbox_bylx .layerbox_left ul.loginformlist .ndrelativewrap{position:relative!important;}",".outlogin_layerbox_bylx .layerbox_left ul.loginformlist li .btn_wrap{float:left!important;}",".outlogin_layerbox_bylx .layerbox_left ul.loginformlist li input.styles{margin:0!important;border-style:solid!important;border-width:1px!important;width: 198px!important;height:14px!important;padding:6px 0 7px 4px!important;outline-style:none!important;vertical-align:middle!important;}",".outlogin_layerbox_bylx .layerbox_left ul.loginformlist li input.styles::-ms-clear{display:none!important;}",".outlogin_layerbox_bylx .layerbox_left ul.loginformlist input.styles:focus::-webkit-input-placeholder {color:transparent!important;}",".outlogin_layerbox_bylx .layerbox_left ul.loginformlist input.styles:focus::-moz-placeholder {color:transparent!important;}",".outlogin_layerbox_bylx .layerbox_left ul.loginformlist li.loginform_yzm{height:28px!important;}",".outlogin_layerbox_bylx .layerbox_left ul.loginformlist li.sub_wrap{padding:0!important;height:32px!important;}",".outlogin_layerbox_bylx .layerbox_left ul.loginformlist li.loginform_yzm input.styles{width:90px!important; float:left!important;}",".outlogin_layerbox_bylx .layerbox_left ul.loginformlist li.loginform_yzm .disability_voice{display:inline-block;","width:35px;height:29px;vertical-align:middle!important;}",".outlogin_layerbox_bylx .layerbox_left ul.loginformlist li.loginform_yzm img.yzm{float:left!important;margin-left:12px!important;height:28px!important;}",".outlogin_layerbox_bylx .layerbox_left ul.loginformlist li.loginform_yzm .reload-code{float:left!important;margin:7px 0 0 5px!important;width:24px!important;height:18px!important;cursor:pointer!important;}",".outlogin_layerbox_bylx .layerbox_left ul.loginformlist a.login_btn,",".outlogin_layerbox_bylx .layerbox_left ul.loginformlist a.register_btn{float:left!important;margin-right:6px!important;padding:7px 18px!important;text-decoration:none!important;font-size:14px!important;}",".outlogin_layerbox_bylx .layerbox_left ul.loginformlist a.register_btn{display:none;}",".outlogin_layerbox_bylx .layerbox_left ul.loginformlist .auto_checkbox{vertical-align:-2px!important;_vertical-align:-1px!important;margin:0 5px 0 0!important;}",".outlogin_layerbox_bylx .layerbox_left ul.loginformlist label{margin:0 0 0 0!important;vertical-align:middle!important;}",".outlogin_layerbox_bylx .layerbox_left ul.loginformlist a.forget_Pwd{margin-left:10px!important;text-decoration:none!important;vertical-align:middle!important;_vertical-align:-1px!important;}",".outlogin_layerbox_bylx .layerbox_left .log_option{float:right!important;padding:10px 20px 0 0!important;_padding-top:4px!important;}",".outlogin_layerbox_bylx .layerbox_left ul.loginformlist a.forget_Pwd:hover{text-decoration:underline!important;}",".outlogin_layerbox_bylx .layerbox_right{float:right!important;margin-top:-17px!important;width:208px!important;overflow:hidden!important;}",".outlogin_layerbox_bylx .layerbox_right .right_cnt{margin:0!important;padding:83px 21px 0!important;text-align:center!important;margin-right:-3px!important;}",".outlogin_layerbox_bylx .layerbox_right .free_regist{padding:0!important;margin:0!important;}",".outlogin_layerbox_bylx .layerbox_right .regist_btn{display:inline-block!important;margin:20px 0 0 0!important;line-height:27px!important;width:78px!important;height:28px!important;text-decoration:none!important;text-align:center!important;padding-right:10px!important;}",".outlogin_layerbox_bylx .association{position:absolute!important;left:30px;top:94px;margin:0;border-width:1px!important;border-style:solid!important;width:230px;overflow:hidden!important;padding:0;clear:both!important;}",".outlogin_layerbox_bylx .association li{margin:0 1px!important;padding:3px!important;line-height:1.2!important;list-style:none!important;white-space:nowrap!important;}",".outlogin_layerbox_bylx .association li.note_item{margin:4px!important;padding:0!important;}",".outlogin_layerbox_bylx .association li a{display:block!important;text-decoration:none!important;}",".outlogin_layerbox_bylx .login_error_tips{position:absolute!important;left:30px!important;top:42px!important;margin:0!important;width:269px!important;padding:0!important;}",".outlogin_LoginBtn{letter-spacing:1px!important;font-size:12px!important;color:#0435ac!important;text-decoration:none!important;line-height:1.2!important;}",".outlogin_LoginBtn:hover{text-decoration:underline!important;}",".outlogin_LoginBtn .LoginIcon{display:inline-block!important;height:15px!important;width:16px!important;vertical-align:middle!important;}",".outlogin_LoginBtn .LoginTx{vertical-align:middle!important;padding-left:5px!important;cursor:pointer!important;}",".outlogin_layerbox_bylx_anrrow{width:300px!important;}",".outlogin_layerbox_bylx_anrrow .cur_move{width:300px!important;}",".outlogin_layerbox_bylx_anrrow .layerbox_right{display:none!important;}",".outlogin_layerbox_bylx_anrrow .layerbox_left{border:0!important;}",".outlogin_layerbox_bylx_anrrow .layerbox_left ul.loginformlist label{margin-left:0!important;}",".outlogin_layerbox_bylx_anrrow  .layerbox_left .log_option{float:none!important;}",".outlogin_layerbox_bylx_anrrow  .btn_wrap{display:block!important;padding-top:17px!important;}",".outlogin_layerbox_bylx_anrrow .layerbox_left ul.loginformlist li.sub_wrap{height:55px!important;}",".outlogin_layerbox_bylx_anrrow  .layerbox_left ul.loginformlist a.register_btn{display:inline!important;}",".outlogin_layerbox_bylx_anrrow  .layerbox_left ul.loginformlist li .btn_wrap{float:none!important;margin-top:-10px!important;}",".outlogin_layerbox_bylx{border-color:#ffc525;color:#434242;box-shadow:4px 4px 0 rgba(0,0,0,.1);background-color:#fff9df;}",".outlogin_layerbox_bylx a.layerbox_close{color:#666;}",".outlogin_layerbox_bylx a.layerbox_close:hover{color:#3f7bc1;}",".outlogin_layerbox_bylx .close_loginname{color:#666;}",".outlogin_layerbox_bylx .close_loginname:hover{color:#DA0000;}",".outlogin_layerbox_bylx .layerbox_left{border-right-color:#fff;background:#fff;}",".outlogin_layerbox_bylx .layerbox_left input.styles{border-color:#d0d0d0;background:#FFF;}",".outlogin_layerbox_bylx .layerbox_left .disability_voice{background:url(http://i.sso.sina.com.cn/images/login/voice.gif) no-repeat 50% 50%;}",".outlogin_layerbox_bylx .layerbox_left a.login_btn,",".outlogin_layerbox_bylx .layerbox_left a.register_btn{background:#ff8500;color:#fff;}",".outlogin_layerbox_bylx .layerbox_left a.login_btn:hover,",".outlogin_layerbox_bylx .layerbox_left a.register_btn:hover{background-color:#ff931d;}",".outlogin_layerbox_bylx .layerbox_left a.forget_Pwd{color:#a87a2c;}",".outlogin_layerbox_bylx .layerbox_right .regist_btn{background:url(http://i.sso.sina.com.cn/images/login/reg_arrow.gif) no-repeat 70px 8px #ff8500;color:#fff;}",".outlogin_layerbox_bylx .layerbox_right .regist_btn:hover{background-color:#ff931d;}",".outlogin_layerbox_bylx .association{border-color:#ddd;background:#fff;}",".outlogin_layerbox_bylx .association .note_item{color:#999;}",".outlogin_layerbox_bylx .association a{color:#999;}",".outlogin_layerbox_bylx .association .current{background:#f4f5f7;}",".outlogin_layerbox_bylx .login_error_tips{color:#DA0000; }",".outlogin_LoginBtn .LoginIcon{background:url(http://i.sso.sina.com.cn/images/login/loginButton_16a.png) no-repeat 0 0;}",".outlogin_layerbox_bylx li.loginform_yzm .reload-code{background:url(http://i.sso.sina.com.cn/images/login/verify_refresh.png) no-repeat 0 0;}",".outlogin_layerbox_bylx li.loginform_yzm .reload-code:hover{background-position:0 -18px;}"];return{get:function(){if(typeof b!=="string"){b=b.join("\n")}return b}}});a.register("kit.extra.language",function(b){var c=window.$LANG||{};return function(d,e){var f=b.core.util.language(d,c);f=f.replace(/\\}/ig,"}");if(e){f=b.templet(f,e)}return f}});a.register("kit.arr.filter",function(b){return function(d,f,g){var c=[];for(var e=0;e<d.length;e++){if(f.call(g,d[e],e,d)){c.push(d[e])}}return c}});a.register("comp.layer.bubble.relate_tip",function(d){var c=d.core.dom.getSize,e=d.kit.dom.builder,b=d.kit.dom.parseDOM;return function(g){var k={};var j=['<div class="tips">','<span node-type="content"></span>','<button node-type="close" class="close" style="cursor:pointer;">×</button>',"</div>"].join("");var h={template:j,related_el:null,parent_node:document.body,use_relative:false,direction:"top",margin:0,styles:{}};k.conf=h;var f={position:"absolute"};k.init=function(){k.root=null;k.nodes={};k.set_options(g)};k.set_options=function(l){h=d.parseParam(h,l);f=d.core.json.merge(f,h.styles)};k.build=function(){var l=e(h.template);k.root=l.box;k.nodes=b(l.list);if(h.use_relative){h.parent_node.appendChild(k.root)}else{h.parent_node.insertBefore(k.root,h.parent_node.firstChild)}k.setEvents("add")};k.set_styles=function(l){l=l||f;if(k.root){d.foreach(l,function(n,m){d.setStyle(k.root,m,n)})}};k.show=function(l,m){k.visible=true;if(!k.root){k.build()}k.set_styles();if(m){h.related_el=m}if(k.root&&h.related_el){d.setStyle(k.root,"display","")}k.set_content(l);k.set_position()};k.set_content=function(m){if(k.nodes){var l=k.nodes.content||k.root;if(m){l.innerHTML=m}}};k.get_content=function(){if(k.nodes){var l=k.nodes.content||k.root;return l.innerHTML}};k.hide=function(){k.visible=false;if(k.root){d.setStyle(k.root,"display","none")}};k.set_position=function(){var n=h.related_el;if(k.root&&n){var p={};var q=d.position(n,{parent:h.parent_node});var m=c(n);p.left=q.l;p.top=q.t;p.right=q.l+m.width;p.bottom=q.t+m.height;var o=c(k.root);var l={};l.top=p.top;l.left=p.left;if(h.direction=="right"){l.left=p.right+h.margin}else{if(h.direction=="bottom"){l.top=p.bottom+h.margin}else{if(h.direction=="left"){l.left=p.left-o.width-h.margin}else{l.top=p.top-o.height-h.margin}}}if(h.use_relative){d.setStyle(k.root,"top",l.top+"px");d.setStyle(k.root,"left",l.left+"px")}else{d.setStyle(k.root,"marginTop",l.top+"px");d.setStyle(k.root,"marginLeft",l.left+"px")}}};var i={hide:function(){d.preventDefault();k.hide()}};k.setEvents=function(l){var m=l+"Event";d[m](k.nodes.close,"click",i.hide)};k.destroy=function(){k.setEvents("remove");if(k.root&&k.root.parentNode){k.root.parentNode.removeChild(k.root)}k.root=null;k.nodes={}};k.init();k.conf=h;return k}});a.register("comp.layer.suggestor.custom_loginname",function(h){var i=h.core.arr.indexOf,k=h.core.dom.getSize,j=h.kit.arr.filter,c=h.kit.extra.language,f=h.kit.evt.input_bindchange,g=h.kit.util.buffer_pool,e=h.comp.layer.bubble.relate_tip;var b=["sina.com","163.com","qq.com","126.com","vip.sina.com","sina.cn","hotmail.com","gmail.com","sohu.com","yahoo.cn","139.com","wo.com.cn","189.cn"];var d={box:'<ul style="display:none;" id="sinaNote" class="passCard">#{inner}</ul>',note:'<li class="note" node-type="note">#{text}</li>',item:'<li class="item" title="" data-email="#{email}" node-type="item"></li>'};var l={box:{zIndex:"1",margin:"0",padding:"0",overflow:"hidden",background:"none repeat scroll 0 0 #FFFFFF",border:"1px solid #CCCCCC",position:"absolute",textAlign:"left"},item:{whiteSpace:"nowrap",wordBreak:"keep-all",clear:"both",color:"#999999",cursor:"pointer",fontSize:"12px",height:"20px",lineHeight:"20px",listStyle:"none outside none",margin:"0 1px",padding:"0 5px"}};return function(q,n){var p={};var m={};var o=h.parseParam({input_delay:200,hide_delay:150,email_list:b,hover_class:"cur",hover_background:"#E8F4FC",onSelect:function(){},format_set:function(r){return h.encodeHTML(r)},format_get:function(s,r){return s},use_relative:false,item_tpl:d.item,item_styles:l.item,note_tpl:d.note,note_text:"请选择邮箱类型",note_styles:l.item,box_tpl:d.box,box_parent_node:document.body,box_direction:"bottom",box_margin:0,box_styles:l.box},n);p.init=function(){m.input=q;if(m.input){m.input.setAttribute("autocomplete","off")}m.root=null;m.items=[];p.items={};p.set_options(n);p.set_input_events("add")};p.set_options=function(r){o=h.parseParam(o,r)};p.buildLayer=function(){var s=[];var r=c(o.note_tpl,{text:o.note_text});s.push(r);s.push(c(o.item_tpl,{email:""}));h.foreach(o.email_list,function(v){var u=c(o.item_tpl,{email:v});s.push(u)});var t=c(o.box_tpl,{inner:s.join("")});if(!o.box_styles.width){o.box_styles.width=k(m.input).width-2+"px"}p.layer=e({template:t,related_el:m.input,use_relative:o.use_relative,parent_node:o.box_parent_node,direction:o.box_direction,margin:o.box_margin,styles:o.box_styles});p.layer.set_content=function(){};p.layer.build();p.root=p.layer.root;m.note=p.layer.nodes.note;m.items=p.layer.nodes.item;p.bound={};p.bound.get_value=function(){h.preventDefault();p.get_value()};h.foreach(m.items,function(v){var u=v.getAttribute("data-email")||"empty";p.items[u]=v;p.bound["over_"+u]=function(){p.select_item(u)}});p.set_item_styles();p.set_position();p.set_layer_events("add")};p.show=function(){if(p.focused){if(!p.layer){p.buildLayer()}p.layer.show()}};p.hide=function(){if(p.layer){p.layer.hide()}};p.isVisible=function(){return p.root?h.getStyle(p.root,"display")!=="none":false};p.onFocus=function(){p.focused=true};p.onBlur=function(){p.focused=false;p.hide()};p.set_position=function(){if(p.layer){p.layer.set_position()}};p.update=function(){var t=m.input.value;var s=t.indexOf("@");var u=t;var r="";if(s>=0){u=t.substr(0,s);r=t.substr(s+1)}u=h.trim(u);r=h.trim(r);h.foreach(m.items,function(w){var v=w.getAttribute("data-email");var x="";if(v){x=u+"@"+v;if(r&&(v.indexOf(r)!==0||v==r)){h.setStyle(w,"display","none")}else{h.setStyle(w,"display","")}}else{x=t}w.innerHTML=o.format_set(x);w.setAttribute("title",x)});p.reset_focus(t)};p.check_update=function(){var r=m.input.value;r=h.trim(r);if(r){if(!p.isVisible()){p.show()}}else{p.hide();return}if(r!=p.pre_value){p.update()}p.pre_value=r};p.delay_update=function(r){if(!p.buffer){p.buffer=g({delay:o.input_delay});p.buffer.feedback=p.check_update}p.buffer.trigger_regular()};p.get_value=function(){var s=m.input.value;if(s&&p.selected_item_node){s=p.selected_item_node.getAttribute("title");var r=p.selected_item_node.getAttribute("data-email");if(r){m.input.value=o.format_get(s,r)}setTimeout(o.onSelect)}};p.check_key=function(r){r=h.fixEvent(r);var s=r.keyCode.toString();if(s==="38"){p.move_focus("up");h.preventDefault()}if(s==="40"){p.move_focus("down")}if(s==="13"||s==="9"){if(p.isVisible()){p.get_value();p.hide()}}};p.select_item=function(r){var s=p.items[r]||p.items.empty;p.set_blur(p.selected_item_node);p.set_focus(s);p.selected_item_node=s;return s};p.reset_focus=function(r){if(r){p.select_item("empty")}else{if(p.selected_item_node){p.set_blur(p.selected_item_node)}}};p.move_focus=function(u){if(!p.layer){return}var s="empty";var x=p.selected_item_node;if(x){s=x.getAttribute("data-email")||"empty"}var r=j(["empty"].concat(o.email_list),function(z){var y=p.items[z];return y.style.display!="none"});var t=i(s,r);var w=u=="down"?t+1:t-1;if(w<0){w=r.length-1}else{if(w>=r.length){w=0}}var v=r[w];p.select_item(v)};p.set_focus=function(r){if(r){h.addClassName(r,o.hover_class);if(o.hover_background){h.setStyle(r,"background",o.hover_background)}}};p.set_blur=function(r){if(r){h.removeClassName(r,o.hover_class);if(o.hover_background){var s=o.note_styles.background||"";h.setStyle(r,"background",s)}}};p.set_item_styles=function(s){s=s||o.item_styles;if(m.items&&m.items.length){var r=[].concat(m.items);if(m.note){r.push(m.note)}h.foreach(r,function(t){h.foreach(s,function(v,u){h.setStyle(t,u,v)})})}};p.set_input_events=function(r){var s=r+"Event";f(m.input,r,p.delay_update);h[s](m.input,"focus",p.onFocus);h[s](m.input,"blur",p.onBlur);h[s](m.input,"keydown",p.check_key)};p.set_layer_events=function(r){var s=r+"Event";h[s](window,"resize",p.set_position);h.foreach(p.items,function(u,t){h[s](u,"mouseover",p.bound["over_"+t])});h[s](p.root,"mousedown",p.bound.get_value)};p.destroy=function(){p.set_input_events("remove");p.set_layer_events("remove");if(p.layer){p.layer.destroy()}};p.nodes=m;p.conf=o;p.init();return p}});a.register("comp.layer.outlogin",function(i){var w=i.core.json.merge,h=i.core.util.language,p=i.core.io.jsonp,c=i.core.dom.getSize,z=i.kit.obj.append,A=i.kit.dom.fix,e=i.kit.dom.builder,j=i.kit.dom.parseDOM,o=i.kit.dom.loadStyle,u=i.kit.util.makeReady,b=i.kit.dom.appendStyle,y=i.module.mask,l=i.module.draggable,t=i.common.util.sso,f=i.common.channel.sso,r=i.comp.defaultStyle,m=i.comp.login.outlogin,x=i.comp.layer.suggestor.custom_loginname;var q={};var d={layer:['<div node-type="box" class="outlogin_layerbox_bylx" style="display:none;">',"#L{iframemask}",'<div class="cur_move" node-type="handle">','<a node-type="close" href="javascript:;" onclick="return false;" class="layerbox_close">&times;</a>',"</div>",'<div node-type="root" class="layerbox_left">','<div class="titletips">#L{新浪微博、博客、邮箱帐号，请直接登录}</div>','<p node-type="tip" class="login_error_tips"></p>','<ul class="loginformlist">','<li class="ndrelativewrap" node-type="loginname_box">','<input node-type="loginname" name="loginname" class="styles" type="text" placeholder="#L{微博/博客/邮箱}" tabindex="1" maxlength="128" autocomplete="off" autocapitalize="off"/>','<a node-type="clear" href="javascript:;" class="close_loginname" style="display:none;">&times;</a>',"</li>",'<li node-type="password_box">','<input node-type="password" name="password" class="styles" type="password" placeholder="#L{请输入密码}" tabindex="2" maxlength="24"/>',"</li>",'<li class="loginform_yzm" node-type="door_box" style="display:none;">','<input node-type="door" name="door" class="styles" type="text" tabindex="3" maxlength="6" autocomplete="off" autocapitalize="off"/>','<img node-type="door_img" class="yzm" alt="#L{看不清？换一换}"/>','<a node-type="door_change" href="javascript:;" class="reload-code" title="#L{看不清？换一换}"></a>','<a node-type="door_voice" href="javascript:;" class="disability_voice" style="display:none;"></a>',"</li>",'<li node-type="vsn_box" style="display:none;">','<input node-type="vsn" name="vsn" class="styles" type="text" tabindex="4" maxlength="6" placeholder="#L{请输入微盾动态码}" autocomplete="off" autocapitalize="off"/>',"</li>",'<li class="sub_wrap">','<span class="log_option">','<label node-type="remember_label">','<input name="remember" node-type="remember" type="checkbox" class="auto_checkbox" checked="checked" autocomplete="off"/>',"<span>#L{下次自动登录}</span>","</label>",'<a node-type="forgot_password" href="http://login.sina.com.cn/getpass.html" class="forget_Pwd" target="_blank" suda-uatrack="key=index_new_menu&value=logon_forgot">#L{忘记密码}</a>',"</span>",'<span class="btn_wrap">','<a href="javascript:;" tabindex="5" node-type="submit" class="login_btn" suda-uatrack="key=index_new_menu&value=logon_login">#L{登录}</a>','<a node-type="register_button" target="_blank" href="https://login.sina.com.cn/signup/signup.php" class="register_btn" suda-uatrack="key=index_new_menu&value=logon_register">#L{注册}</a>',"</span>","</li>","</ul>","</div>",'<div class="layerbox_right">','<div class="right_cnt">','<p class="free_regist">#L{还未开通？立即免费注册吧！}<a node-type="register_button" href="https://login.sina.com.cn/signup/signup.php" class="regist_btn" target="_blank" suda-uatrack="key=index_new_menu&value=logon_register">#L{立即注册}</a></p>',"</div>","</div>",'<div node-type="css_check" class="outlogin_checkload" style="display:none;"></div>',"</div>"].join(""),login_button:'<a class="outlogin_LoginBtn" href="javascript:;"><span class="LoginIcon"></span><span class="LoginTx">#L{登录}</span></a>',suggestor_box:'<ul style="display:none;" class="association">#{inner}</ul>',suggestor_item:'<li title="" data-email="#{email}" node-type="item"></li>',suggestor_note:'<li class="note_item" node-type="note">#{text}</li>'};var k={};var s={};var g={html:{button:d.login_button,layer:d.layer},extra:{css:"",ssologin:"http://i.sso.sina.com.cn/js/ssologin.js"},sso:{entry:"sso",setDomain:true,domain:"sina.com.cn"},login:{timeout:10*1000,name:"pluginSSOController",vsnf:1},language:{iframemask:"",E010001:"请输入登录名",E010002:"请输入密码",E010003:"请输入验证码",E010004:"请输入您微盾上显示的动态码",E010005:"网络异常，请检查网络连接","4010":'帐号尚未激活，请<a href="https://login.sina.com.cn/signup/signupmail1.php?user=#{loginname}" target="_blank">点此激活</a>',end:""},styles:{zIndex:"1000"},drag:{enable:true,handle:"handle",dragarea:"page"},mask:{enable:false,useIframeInIE6:true,opacity:0.5,background:"#000000"},suggestor:{email_list:["sina.com","vip.sina.com","sina.cn","3g.sina.cn","非新浪邮箱"],format_set:function(B){return'<a href="javascript:;" onclick="return false">'+i.encodeHTML(B)+"</a>"},format_get:function(C,B){if(C&&B==="非新浪邮箱"){C=C.split(/@/)[0]}return C},hover_class:"current",hover_background:"",item_tpl:d.suggestor_item,item_styles:{},note_tpl:d.suggestor_note,note_styles:{},box_tpl:d.suggestor_box,box_styles:{margin:"0 0 0 -1px"},use_relative:true},modes:{simple:"outlogin_layerbox_bylx_anrrow"},plugin:{mode:"",position:"center",parentNode:null,relatedNode:null,useIframeInIE6:true,shakeWhenError:true,autologin:true,voiceEnable:false,savestate:30}};i.$LANG=g.language;k.set=function(D,B){D=D.toString();B=B||{};var C=g[D];if(C){C=w(C,B);g[D]=C}if(s[D]&&s[D].conf){z(s[D].conf,C)}return k};k.getSSO=function(){return window[g.login.name]};k.init=function(){if(g.plugin.autologin){s.prepare(function(){var B=k.getSSO();if(B&&B.autoLogin){B.autoLogin(function(){f.fire("login_complete");if(k.isLogin()){f.fire("login_success")}else{f.fire("login_failure")}})}})}return k};s.fixDragOps=function(){var B=w({},g.drag);if(!i.isNode(B.handle)){B.handle=q[B.handle]}B.exclude=[q.close];return B};s.prepareSSO=function(B){if(!s.ssoReady){s.ssoReady=u({condition:function(){return !!window.sinaSSOController},ready:function(C){i.scriptLoader({timeout:10*1000,url:g.extra.ssologin,onComplete:C,onTimeout:function(){s.ssoReady.reset()}})}})}s.ssoReady.exec(B)};var v=false;s.prepareCss=function(B){if(!s.cssReady){s.cssReady=u({condition:function(){return v},ready:function(C){b(r.get());if(g.extra.css){o(g.extra.css,{timeout:10*1000,styleCheck:function(){if(i.isNode(q.css_check)){var D=i.getStyle(q.css_check,"width");if(D==="123px"){return true}}},onLoad:function(){v=true;C()},onTimeout:function(){s.cssReady.reset()}})}else{v=true;C()}}})}s.cssReady.exec(B)};s.prepare=function(B){i.Ready(function(){s.prepareSSO(function(){s.setSSO();s.parseDom();s.prepareCss(function(){s.build();if(i.getType(B)==="function"){B()}})})})};s.setSSO=function(){if(!s.SSO){if(window.SSOController){s.SSO=t(g.login);s.SSO.init();var B=k.getSSO();i.foreach(g.sso,function(D,C){B[C]=D})}s.setListener("add")}};s.build=function(){if(s.plugin){return}s.setSSO();s.parseDom();i.setStyle(q.box,"display","");if(g.plugin.voiceEnable){if(!g.language["2070"]){g.language["2070"]='验证码错误。<a href="javascript:;" onclick="try{SINA_OUTLOGIN_LAYER.listener.fire(\'play_door_voice\');}catch(e){}return false;">点击收听验证码。</a>'}if(q.door_voice){i.setStyle(q.door_voice,"display","")}}if(g.mask.enable){s.mask=y.showUnderNode(q.box,g.mask)}var B=s.fixDragOps();s.drag=l(q.box,B);s.drag.init();s.plugin=m(q.box);g.plugin.entry=g.sso.entry;g.plugin.ssoName=g.login.name;s.plugin.setOptions(g.plugin);s.plugin.init();if(q.loginname){g.suggestor.onSelect=function(){if(k.isVisible()){q.password.focus()}};g.suggestor.box_parent_node=q.box;g.suggestor.note_text=h("#L{请选择邮箱类型}",g.language);s.suggestor=x(q.loginname,g.suggestor)}i.setStyle(q.box,"display","none");s.setEvents("add");f.fire("layer_ready")};s.insert=function(){if(!i.isNode(q.box)){return}var B=g.plugin.parentNode;if(!i.isNode(B)){B=document.body}if(!i.isNode(q.box.parentNode)||B!==s._currentParentNode){B.appendChild(q.box)}s._currentParentNode=B};s.parseDom=function(){if(!i.isNode(q.box)){if(i.core.util.browser.IE6&&g.plugin.useIframeInIE6){g.language.iframemask='<iframe node-type="iframemask" style="position:absolute;z-index:-1;width:100%;height:100%;filter:mask();left:0;top:0;"></iframe>'}var B=h(g.html.layer,g.language);var C=e(B);k.nodes=q=j(C.list);q.box=C.box;s.insert()}};s.updateLayer=function(){s.insert();i.foreach(g.styles,function(E,D){i.setStyle(q.box,D,E)});var B=w({},g.drag);var C=q[B.handle];if(i.isNode(C)){if(B.enable){i.setStyle(C,"cursor","move");s.drag.enable()}else{i.setStyle(C,"cursor","auto");s.drag.disable()}}};s.setPosition=function(){var C=g.plugin.position,H=c(q.box),G,B,F,E;if(C==="center"){if(!s.fixedLayer){s.fixedLayer=A(q.box,"c")}else{s.fixedLayer.setFixed(true)}}else{if(s.fixedLayer){s.fixedLayer.destroy();s.fixedLayer=null}if(C==="custom"){i.setStyle(q.box,"position","absolute")}else{i.setStyle(q.box,"position","absolute");G=g.plugin.relatedNode;if(G){F=i.position(G);E=c(G)}B=C.split(/\s*[,，]\s*/gi);i.foreach(B,function(I){if(F&&E){switch(I){case"top":i.setStyle(q.box,"top",F.t+"px");break;case"bottom":i.setStyle(q.box,"top",F.t+E.height-H.height+"px");break;case"left":i.setStyle(q.box,"left",F.l+"px");break;case"right":i.setStyle(q.box,"left",F.l+E.width-H.width+"px");break;default:break}}else{i.setStyle(q.box,I,"0px")}})}}if(q.iframemask){var D=i.getStyle(q.box,"borderWidth");D=parseInt(D,10);i.setStyle(q.iframemask,"width",H.width+"px");i.setStyle(q.iframemask,"height",H.height+"px");i.setStyle(q.iframemask,"marginLeft",0-D+"px");i.setStyle(q.iframemask,"marginTop",0-D+"px")}};k.reset=function(){if(s.plugin){s.plugin.reset()}if(s.suggestor){s.suggestor.hide()}};s.onLogin=function(){k.hide()};s.onClose=function(){k.hide()};s.onLogout=function(){};s.shake=(function(){var D="ui-outlogin-shake";var E="outlogin-layer-shake";var C=null;var B=function(){if(C){return}var G,J=[],F=-16;J.push("."+D+" {-webkit-animation:"+E+" 600ms;}\n");J.push("@-webkit-keyframes "+E+" {\n");for(G=0;G<11;G++){J.push([G*10+"% {","-webkit-transform:translateX(",(G%2?F:0),"px);","-webkit-animation-timing-function:",(G%2?"ease-in":"ease-out"),";}\n"].join(""));if(G%2){F=0-F/2}}J.push("}\n");var H=J.join("");var I=({presto:"-o-",trident:"-ms-",gecko:"-moz-"})[i.core.util.browser.CORE];if(I){H=H.replace("-webkit-",I,"gi")}C=b(H)};return function(){if(g.plugin.shakeWhenError){B();if(i.getStyle(q.box,"display")==="none"){return}i.removeClassName(q.box,D);setTimeout(function(){i.addClassName(q.box,D)},100)}}})();s.setEvents=function(B){var C=B==="add"?"addEvent":"removeEvent";i[C](q.close,"click",s.onClose);i[C](window,"unload",k.destroy)};s.setListener=function(B){var C=B==="add"?"register":"remove";f[C]("login_success",s.onLogin);f[C]("logout_success",s.onLogout);f[C]("login_failure",s.shake);f[C]("validate_failure",s.shake)};k.setLoginButton=function(B){i.Ready(function(){if(i.getType(B)==="string"){k.loginButton=i.E(B)}else{if(i.isNode(B)){k.loginButton=B}}if(k.loginButton){var D=h(g.html.button);var C=e(D).box;s.prepare(function(){k.loginButton.appendChild(C);i.addEvent(C,"click",k.show)});if(k.isLogin()){i.setStyle(C,"display","none")}f.register("login_success",function(){i.setStyle(C,"display","none")});f.register("logout_success",function(){i.setStyle(C,"display","")})}});return k};k.isDisplay=function(){return q.box?i.getStyle(q.box,"display")!=="none":false};k.isVisible=function(){return q.box?!!q.box.offsetWidth:false};k.show=function(){try{i.preventDefault()}catch(B){}s.prepare(function(){var D=k.isDisplay();var C=k.isVisible();if(!D){if(s.mask){i.setStyle(s.mask.getNode(),"display","")}if(q.box){i.setStyle(q.box,"display","");k.reset()}}k.setMode(g.plugin.mode);s.updateLayer();s.setPosition();if(!C){if(s.plugin){s.plugin.getRemember();s.plugin.showClearButton()}}if(!D){f.fire("layer_show")}});return k};k.hide=function(){try{i.preventDefault()}catch(B){}k.reset();if(s.suggestor){s.suggestor.hide()}if(s.mask){i.setStyle(s.mask.getNode(),"display","none")}if(q.box){i.setStyle(q.box,"display","none")}f.fire("layer_hide");return k};var n=function(F){var B=F.split("&");var E;var D={};for(var C=0;C<B.length;C++){E=B[C].split("=");D[E[0]]=decodeURIComponent(E[1])||""}return D};k.getSinaInfo=function(){var B=i.cookie.get("sso_info");if(B){B=decodeURIComponent(B);return n(B)}else{return null}};k.getSinaCookie=function(){var D=i.cookie.get("SUP");var C=i.cookie.get("ALF");var B=i.cookie.get("SUR");if(!D&&!C){return null}var E=D||B;if(!E){return null}E=decodeURIComponent(E);return n(E)};k.isLogin=function(){return !!k.getSinaCookie()};k.logout=function(){i.preventDefault();s.prepare(function(){if(s.SSO){s.SSO.logout()}});return k};k.destroy=function(){k.hide();s.setEvents("remove");s.setListener("remove");if(k.loginButton){i.removeEvent(k.loginButton,"click",k.show);k.loginButton=null}i.foreach(["mask","SSO","plugin","suggestor"],function(B){var D=s[B];if(D&&typeof(D.destroy)==="function"){try{D.destroy()}catch(C){}}})};k.setMode=function(D){var C=g.modes;if(i.isNode(q.box)){var B=g.modes[D];q.box.className="outlogin_layerbox_bylx";if(B){i.addClassName(q.box,B)}}return k};k.getWeiboInfo=function(B){var D=w({url:"http://api.sina.com.cn/weibo/wb/users_show.json",uid:"",args:{uid:"",source:"2835469272"},onComplete:null,onTimeout:null,responseName:null,onSuccess:i.funcEmpty,onFailure:i.funcEmpty},B);var E=i.getType(D.onSuccess)==="function"?D.onSuccess:i.funcEmpty,C=i.getType(D.onFailure)==="function"?D.onFailure:i.funcEmpty;if(i.getType(D.onComplete)!=="function"){D.onComplete=function(F){var H,G={};if(F&&F.result&&!F.result.data){C({result:false,type:"server",data:F});return}try{H=F.result.data;G.data={name:H.name,avatar_large:H.avatar_large,profile_url:H.profile_url,profile_image_url:H.profile_image_url};G.result=true}catch(I){C({result:false,type:"parse"});return}E(G)}}if(i.getType(D.onTimeout)!=="function"){D.onTimeout=function(F){C({result:false,type:"timeout"})}}s.prepareSSO(function(){var G=window.sinaSSOController;var F;if(i.getType(D.args)==="object"){if(D.uid){D.args.uid=D.uid}else{if(G&&i.getType(G.getLoginInfo)==="function"){F=G.getLoginInfo();D.args.uid=F.uid}}}p(D)});return k};k.register=function(C,B){f.register(C,B);return k};k.remove=function(C,B){f.remove(C,B);return k};k.getNodes=function(){return q};k.nodes=q;k.options=g;return k});(function(c){var b=a.comp.layer.outlogin;b.listener=c.common.channel.sso;b.STK=a;this.SINA_OUTLOGIN_LAYER=b}).call(this,a)}).call(this);